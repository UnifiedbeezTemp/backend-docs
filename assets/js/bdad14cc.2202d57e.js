"use strict";(globalThis.webpackChunkbackend_docs=globalThis.webpackChunkbackend_docs||[]).push([[9819],{8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var d=s(6540);const t={},i=d.createContext(t);function r(e){const n=d.useContext(i);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),d.createElement(i.Provider,{value:n},e.children)}},9093:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"automations/automations","title":"Automations \u2014 Frontend Integration Guide","description":"This document covers the full automation API: the { logic, layout } response contract, all endpoints, step types, config shapes, status lifecycle, and execution routing.","source":"@site/docs/automations/automations.md","sourceDirName":"automations","slug":"/automations/","permalink":"/backend-docs/docs/automations/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/automations/automations.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","next":{"title":"Automation Categories \u2014 Frontend Integration Guide","permalink":"/backend-docs/docs/automations/campaign-templates"}}');var t=s(4848),i=s(8453);const r={sidebar_position:1},c="Automations \u2014 Frontend Integration Guide",l={},o=[{value:"Response Contract: <code>{ logic, layout }</code>",id:"response-contract--logic-layout-",level:2},{value:"<code>TriggerNode</code>",id:"triggernode",level:3},{value:"<code>LogicStep</code>",id:"logicstep",level:3},{value:"<code>CanvasLayout</code>",id:"canvaslayout",level:3},{value:"Step Type Roles",id:"step-type-roles",level:2},{value:"Automation Status Lifecycle",id:"automation-status-lifecycle",level:2},{value:"Category Slugs",id:"category-slugs",level:2},{value:"Step Key Reference",id:"step-key-reference",level:2},{value:"Core step types (<code>type: &quot;action&quot;</code> or <code>type: &quot;condition&quot;</code>)",id:"core-step-types-type-action-or-type-condition",level:3},{value:"Sales &amp; Lead Generation predefined steps (<code>type: &quot;auto&quot;</code>)",id:"sales--lead-generation-predefined-steps-type-auto",level:3},{value:"Support Escalation predefined steps (<code>type: &quot;auto&quot;</code>)",id:"support-escalation-predefined-steps-type-auto",level:3},{value:"Retention &amp; Nurture predefined steps (<code>type: &quot;auto&quot;</code>)",id:"retention--nurture-predefined-steps-type-auto",level:3},{value:"<code>completionStatus</code> Rules",id:"completionstatus-rules",level:2},{value:"<code>nextStepIds</code> Routing",id:"nextstepids-routing",level:2},{value:"Linear categories (SLG, SE, RN, and standard automations)",id:"linear-categories-slg-se-rn-and-standard-automations",level:3},{value:"Reengagement Campaigns (<code>REENGAGEMENT_CAMPAIGNS</code>)",id:"reengagement-campaigns-reengagement_campaigns",level:3},{value:"Step <code>config</code> Shapes",id:"step-config-shapes",level:2},{value:"<code>send-message</code>",id:"send-message",level:3},{value:"<code>wait</code>",id:"wait",level:3},{value:"<code>smart-rule</code>",id:"smart-rule",level:3},{value:"<code>automation-list</code>",id:"automation-list",level:3},{value:"<code>trigger-condition</code>",id:"trigger-condition",level:3},{value:"Predefined step configs (<code>type: &quot;auto&quot;</code>)",id:"predefined-step-configs-type-auto",level:3},{value:"Trigger Types",id:"trigger-types",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Get category definitions",id:"get-category-definitions",level:3},{value:"Create automation",id:"create-automation",level:3},{value:"List automations",id:"list-automations",level:3},{value:"Get single automation",id:"get-single-automation",level:3},{value:"Update step configuration",id:"update-step-configuration",level:3},{value:"Update automation",id:"update-automation",level:3},{value:"Delete automation",id:"delete-automation",level:3},{value:"Update status",id:"update-status",level:3},{value:"Save canvas layout",id:"save-canvas-layout",level:3},{value:"Add a step",id:"add-a-step",level:3},{value:"Update a step (full replace)",id:"update-a-step-full-replace",level:3},{value:"Delete a step",id:"delete-a-step",level:3},{value:"Reorder a step",id:"reorder-a-step",level:3},{value:"Execution endpoints",id:"execution-endpoints",level:3},{value:"Execution Routing",id:"execution-routing",level:2},{value:"Linear automations (SLG, SE, RN, non-template)",id:"linear-automations-slg-se-rn-non-template",level:3},{value:"Reengagement automations",id:"reengagement-automations",level:3},{value:"Predefined (isDefault) Steps",id:"predefined-isdefault-steps",level:2},{value:"Filter Options (Automation-level)",id:"filter-options-automation-level",level:2},{value:"Error Responses",id:"error-responses",level:2},{value:"TypeScript Reference",id:"typescript-reference",level:2},{value:"Quick-start Examples",id:"quick-start-examples",level:2},{value:"Create and configure an SLG automation",id:"create-and-configure-an-slg-automation",level:3},{value:"Create a blank Reengagement automation",id:"create-a-blank-reengagement-automation",level:3},{value:"Saving canvas layout (debounced)",id:"saving-canvas-layout-debounced",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"automations--frontend-integration-guide",children:"Automations \u2014 Frontend Integration Guide"})}),"\n",(0,t.jsxs)(n.p,{children:["This document covers the full automation API: the ",(0,t.jsx)(n.code,{children:"{ logic, layout }"})," response contract, all endpoints, step types, config shapes, status lifecycle, and execution routing."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"response-contract--logic-layout-",children:["Response Contract: ",(0,t.jsx)(n.code,{children:"{ logic, layout }"})]}),"\n",(0,t.jsxs)(n.p,{children:["Every ",(0,t.jsx)(n.code,{children:"GET /automations"})," and ",(0,t.jsx)(n.code,{children:"GET /automations/:id"})," response uses this shape:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'interface AutomationResponse {\n  id: number;\n  name: string;\n  description: string | null;\n  category: CategorySlug | null; // kebab-case string, see Category Slugs\n  status: AutomationStatus; // "DRAFT" | "ACTIVE" | "PAUSED" | "ARCHIVED"\n  logicVersion: string; // e.g. "1.0.0"\n  logic: {\n    version: string;\n    trigger: TriggerNode | null;\n    steps: LogicStep[];\n  };\n  layout: CanvasLayout | null; // opaque JSON, stored as-is\n  _count?: { executions: number };\n  createdAt: string; // ISO 8601\n  updatedAt: string; // ISO 8601\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"triggernode",children:(0,t.jsx)(n.code,{children:"TriggerNode"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'interface TriggerNode {\n  id: string; // stringified trigger DB id\n  type: AutomationTriggerType; // backend enum\n  stepKey: "trigger";\n  label: string;\n  conditions: TriggerCondition[];\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"logicstep",children:(0,t.jsx)(n.code,{children:"LogicStep"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'interface LogicStep {\n  id: string; // stringified step DB id\n  type: "action" | "condition" | "auto"; // semantic role \u2014 see Step Type Roles\n  stepKey: string; // kebab-case routing key (see Step Key Reference)\n  label: string; // human-readable name\n  order: number; // stepOrder from DB (0-based for predefined steps)\n  config: Record<string, any>; // flattened step config (see per-step shapes)\n  nextStepIds: string[]; // computed for linear categories; explicit for REENGAGEMENT\n  completionStatus: "pending" | "configured"; // "error" is client-side only\n  isDefault: boolean; // true = auto-created by backend (predefined step)\n  locked: boolean; // true = step order is fixed (same as isDefault)\n  required: boolean; // true = step cannot be removed (same as isDefault)\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"canvaslayout",children:(0,t.jsx)(n.code,{children:"CanvasLayout"})}),"\n",(0,t.jsx)(n.p,{children:"An opaque JSON blob owned by the frontend. The backend stores and returns it without modification."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface CanvasLayout {\n  viewport?: { x: number; y: number; zoom: number };\n  nodes?: Record<string, { x: number; y: number }>;\n  groups?: Record<\n    string,\n    { x: number; y: number; width: number; height: number }\n  >;\n  links?: Record<string, { style?: Record<string, any> }>;\n  [key: string]: any;\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"step-type-roles",children:"Step Type Roles"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"type"})," field classifies each step's semantic role:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"type"})}),(0,t.jsx)(n.th,{children:"Applies to"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"action"'})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"SEND_MESSAGE"}),", ",(0,t.jsx)(n.code,{children:"WAIT"}),", ",(0,t.jsx)(n.code,{children:"AUTOMATION_LIST"}),", ",(0,t.jsx)(n.code,{children:"TAG_ACTION"}),", ",(0,t.jsx)(n.code,{children:"STATUS_CHANGE"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"condition"'})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"SMART_RULE"}),", ",(0,t.jsx)(n.code,{children:"TRIGGER_CONDITION"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"auto"'})}),(0,t.jsxs)(n.td,{children:["All predefined template steps: ",(0,t.jsx)(n.code,{children:"SLG_*"}),", ",(0,t.jsx)(n.code,{children:"SE_*"}),", ",(0,t.jsx)(n.code,{children:"RN_*"})]})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"automation-status-lifecycle",children:"Automation Status Lifecycle"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"DRAFT \u2500\u2500activate\u2500\u2500\u25ba ACTIVE \u2500\u2500pause\u2500\u2500\u25ba PAUSED\n  \u25b2                    \u2502                 \u2502\n  \u2502                    \u2514\u2500\u2500archive\u2500\u2500\u25ba  ARCHIVED\n  \u2502                                     \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 (unarchive) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Status"}),(0,t.jsx)(n.th,{children:"Meaning"}),(0,t.jsx)(n.th,{children:"Executions triggered?"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DRAFT"})}),(0,t.jsx)(n.td,{children:"Being configured, not yet live"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ACTIVE"})}),(0,t.jsx)(n.td,{children:"Live \u2014 triggers fire and executions run"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PAUSED"})}),(0,t.jsx)(n.td,{children:"Temporarily suspended"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ARCHIVED"})}),(0,t.jsx)(n.td,{children:"Retired \u2014 no longer runs"}),(0,t.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Change status via ",(0,t.jsx)(n.code,{children:"PATCH /automations/:id/status"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"category-slugs",children:"Category Slugs"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"category"})," field in responses uses kebab-case strings:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"DB enum"}),(0,t.jsx)(n.th,{children:"Response value"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SALES_LEAD_GENERATION"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"sales-and-lead-generation"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SUPPORT_ESCALATION"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"support-escalation"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RETENTION_NURTURE"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"retention-nurture"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"REENGAGEMENT_CAMPAIGNS"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"reengagement-campaigns"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:"(none set)"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"null"})})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"step-key-reference",children:"Step Key Reference"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"stepKey"})," to route to the correct configuration drawer or component in the UI."]}),"\n",(0,t.jsxs)(n.h3,{id:"core-step-types-type-action-or-type-condition",children:["Core step types (",(0,t.jsx)(n.code,{children:'type: "action"'})," or ",(0,t.jsx)(n.code,{children:'type: "condition"'}),")"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"stepKey"})}),(0,t.jsx)(n.th,{children:"DB enum"}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"type"})}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"send-message"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SEND_MESSAGE"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"action"})}),(0,t.jsx)(n.td,{children:"Send email / WhatsApp / SMS"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"wait"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"WAIT"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"action"})}),(0,t.jsx)(n.td,{children:"Delay execution"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"automation-list"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AUTOMATION_LIST"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"action"})}),(0,t.jsx)(n.td,{children:"Add/remove/move contact in a list"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tag-action"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TAG_ACTION"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"action"})}),(0,t.jsx)(n.td,{children:"Apply or remove a tag"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"status-change"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"STATUS_CHANGE"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"action"})}),(0,t.jsx)(n.td,{children:"Update lead status"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"smart-rule"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SMART_RULE"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"condition"})}),(0,t.jsx)(n.td,{children:"Conditional branch"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"trigger-condition"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TRIGGER_CONDITION"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"condition"})}),(0,t.jsx)(n.td,{children:"Inline trigger check"})]})]})]}),"\n",(0,t.jsxs)(n.h3,{id:"sales--lead-generation-predefined-steps-type-auto",children:["Sales & Lead Generation predefined steps (",(0,t.jsx)(n.code,{children:'type: "auto"'}),")"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"stepKey"})}),(0,t.jsx)(n.th,{children:"DB enum"}),(0,t.jsx)(n.th,{children:"Human name"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-webchat-install"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SLG_WEBCHAT_INSTALL"})}),(0,t.jsx)(n.td,{children:"Add BeeBot to Your Website"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-consent-flow"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SLG_CONSENT_FLOW"})}),(0,t.jsx)(n.td,{children:"Smart Consent Flow"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-select-channels"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SLG_SELECT_CHANNELS"})}),(0,t.jsx)(n.td,{children:"Select Connected Channels"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-form-integration"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SLG_FORM_INTEGRATION"})}),(0,t.jsx)(n.td,{children:"Integrate Your Form"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-sender-email"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SLG_SENDER_EMAIL"})}),(0,t.jsx)(n.td,{children:"Configure Sender Email"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-campaign-list"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SLG_CAMPAIGN_LIST"})}),(0,t.jsx)(n.td,{children:"Create Campaign List"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-beebot-handler"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SLG_BEEBOT_HANDLER"})}),(0,t.jsx)(n.td,{children:"Select BeeBot Handler"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-crm-tags"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SLG_CRM_TAGS"})}),(0,t.jsx)(n.td,{children:"CRM Tags / Keywords"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-tag-notifications"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SLG_TAG_NOTIFICATIONS"})}),(0,t.jsx)(n.td,{children:"CRM Tag Notification Settings"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-outreach-email"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SLG_OUTREACH_EMAIL"})}),(0,t.jsx)(n.td,{children:"Build Your Outreach Email"})]})]})]}),"\n",(0,t.jsxs)(n.h3,{id:"support-escalation-predefined-steps-type-auto",children:["Support Escalation predefined steps (",(0,t.jsx)(n.code,{children:'type: "auto"'}),")"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"stepKey"})}),(0,t.jsx)(n.th,{children:"DB enum"}),(0,t.jsx)(n.th,{children:"Human name"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"se-select-channels"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SE_SELECT_CHANNELS"})}),(0,t.jsx)(n.td,{children:"Select Connected Channels"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"se-select-faqs"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SE_SELECT_FAQS"})}),(0,t.jsx)(n.td,{children:"Select FAQ Category"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"se-faq-config"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SE_FAQ_CONFIG"})}),(0,t.jsx)(n.td,{children:"FAQ Configuration"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"se-campaign-preview"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SE_CAMPAIGN_PREVIEW"})}),(0,t.jsx)(n.td,{children:"Campaign Preview"})]})]})]}),"\n",(0,t.jsxs)(n.h3,{id:"retention--nurture-predefined-steps-type-auto",children:["Retention & Nurture predefined steps (",(0,t.jsx)(n.code,{children:'type: "auto"'}),")"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"stepKey"})}),(0,t.jsx)(n.th,{children:"DB enum"}),(0,t.jsx)(n.th,{children:"Human name"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"rn-create-campaign"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RN_CREATE_CAMPAIGN"})}),(0,t.jsx)(n.td,{children:"Create Campaign"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"rn-campaign-config"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RN_CAMPAIGN_CONFIG"})}),(0,t.jsx)(n.td,{children:"Campaign Configuration"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"rn-outreach-email"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RN_OUTREACH_EMAIL"})}),(0,t.jsx)(n.td,{children:"Build Your Outreach Email"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"completionstatus-rules",children:[(0,t.jsx)(n.code,{children:"completionStatus"})," Rules"]}),"\n",(0,t.jsxs)(n.p,{children:["The backend computes ",(0,t.jsx)(n.code,{children:"completionStatus"})," per step based on whether the required config key(s) are populated."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"stepKey"})}),(0,t.jsx)(n.th,{children:"Required key(s)"}),(0,t.jsx)(n.th,{children:"Logic"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"send-message"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"messageType"})}),(0,t.jsx)(n.td,{children:"Non-empty"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"wait"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"waitMinutes"}),", ",(0,t.jsx)(n.code,{children:"waitHours"}),", ",(0,t.jsx)(n.code,{children:"waitDays"})]}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Any one"})," > 0"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"smart-rule"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"conditions"})}),(0,t.jsx)(n.td,{children:"Non-empty array"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"automation-list"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"action"})}),(0,t.jsx)(n.td,{children:"Non-empty"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"trigger-condition"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"conditions"})}),(0,t.jsx)(n.td,{children:"Non-empty array"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-webchat-install"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"websiteUrl"})}),(0,t.jsx)(n.td,{children:"Non-empty string"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-consent-flow"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"method"})}),(0,t.jsx)(n.td,{children:"Non-empty string"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-select-channels"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"channelAccounts"})}),(0,t.jsx)(n.td,{children:"Non-empty array"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-form-integration"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"embedUrl"})}),(0,t.jsx)(n.td,{children:"Non-empty string"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-sender-email"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"emailConfigId"})}),(0,t.jsx)(n.td,{children:"Non-null"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-campaign-list"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"listIds"})}),(0,t.jsx)(n.td,{children:"Non-empty array"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-beebot-handler"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aiAssistantId"})}),(0,t.jsx)(n.td,{children:"Non-null"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-crm-tags"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tagIds"})}),(0,t.jsx)(n.td,{children:"Non-empty array"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-tag-notifications"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"notifications"})}),(0,t.jsx)(n.td,{children:"Non-empty array"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"slg-outreach-email"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"emailTemplateId"})}),(0,t.jsx)(n.td,{children:"Non-null"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"se-select-channels"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"channelAccounts"})}),(0,t.jsx)(n.td,{children:"Non-empty array"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"se-select-faqs"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"faqIds"})}),(0,t.jsx)(n.td,{children:"Non-empty array"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"se-faq-config"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"completed"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"true"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"se-campaign-preview"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"completed"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"true"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"rn-create-campaign"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tagIds"})}),(0,t.jsx)(n.td,{children:"Non-empty array"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"rn-campaign-config"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"leadSourceChannelId"})}),(0,t.jsx)(n.td,{children:"Non-null"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"rn-outreach-email"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"emailTemplateId"})}),(0,t.jsx)(n.td,{children:"Non-null"})]})]})]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:'"error"'})," is a ",(0,t.jsx)(n.strong,{children:"client-side only"})," state \u2014 the backend never returns it."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["A step with no matching entry defaults to ",(0,t.jsx)(n.code,{children:'"configured"'}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"nextstepids-routing",children:[(0,t.jsx)(n.code,{children:"nextStepIds"})," Routing"]}),"\n",(0,t.jsx)(n.h3,{id:"linear-categories-slg-se-rn-and-standard-automations",children:"Linear categories (SLG, SE, RN, and standard automations)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"nextStepIds"})," is ",(0,t.jsx)(n.strong,{children:"computed at response time"})," from step order:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'step[order=0] \u2192 nextStepIds: ["<step[order=1].id>"]\nstep[order=1] \u2192 nextStepIds: ["<step[order=2].id>"]\nstep[order=N] \u2192 nextStepIds: []   // last step\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"reengagement-campaigns-reengagement_campaigns",children:["Reengagement Campaigns (",(0,t.jsx)(n.code,{children:"REENGAGEMENT_CAMPAIGNS"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"nextStepIds"})," comes from the ",(0,t.jsxs)(n.strong,{children:["explicitly stored ",(0,t.jsx)(n.code,{children:"nextStepId"})]})," on each ",(0,t.jsx)(n.code,{children:"AutomationStep"}),". Smart Rule steps also carry ",(0,t.jsx)(n.code,{children:"trueNextStepId"})," / ",(0,t.jsx)(n.code,{children:"falseNextStepId"})," in their ",(0,t.jsx)(n.code,{children:"config"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"step-config-shapes",children:["Step ",(0,t.jsx)(n.code,{children:"config"})," Shapes"]}),"\n",(0,t.jsx)(n.h3,{id:"send-message",children:(0,t.jsx)(n.code,{children:"send-message"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "messageType": "MARKETING_EMAIL",\n  "emailTemplateId": 14,\n  "customMessage": null,\n  "sendingTime": "09:00"\n}\n'})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsxs)(n.th,{children:[(0,t.jsx)(n.code,{children:"messageType"})," values"]})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"messageType"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:'"MARKETING_EMAIL"'})," | ",(0,t.jsx)(n.code,{children:'"WHATSAPP"'})," | ",(0,t.jsx)(n.code,{children:'"SMS"'})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"emailTemplateId"})}),(0,t.jsx)(n.td,{children:"number | null"}),(0,t.jsxs)(n.td,{children:["Used when ",(0,t.jsx)(n.code,{children:'messageType = "MARKETING_EMAIL"'})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"customMessage"})}),(0,t.jsx)(n.td,{children:"string | null"}),(0,t.jsx)(n.td,{children:"Used for WhatsApp / SMS"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sendingTime"})}),(0,t.jsx)(n.td,{children:"string | null"}),(0,t.jsxs)(n.td,{children:["HH",":MM"," preferred send time"]})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"wait",children:(0,t.jsx)(n.code,{children:"wait"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "waitMinutes": null,\n  "waitHours": null,\n  "waitDays": 3,\n  "waitUntilTime": null,\n  "waitUntilDay": null\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Only one of ",(0,t.jsx)(n.code,{children:"waitMinutes"}),", ",(0,t.jsx)(n.code,{children:"waitHours"}),", ",(0,t.jsx)(n.code,{children:"waitDays"})," needs to be set."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"smart-rule",children:(0,t.jsx)(n.code,{children:"smart-rule"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "VIP Check",\n  "conditions": [\n    {\n      "conditionOrder": 0,\n      "logicOperator": "AND",\n      "conditionType": "field",\n      "fieldName": "leadStatus",\n      "operator": "EQUALS",\n      "value": "qualified"\n    }\n  ],\n  "trueNextStepId": null,\n  "falseNextStepId": null\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"trueNextStepId"})," / ",(0,t.jsx)(n.code,{children:"falseNextStepId"})," are only relevant for ",(0,t.jsx)(n.code,{children:"REENGAGEMENT_CAMPAIGNS"})," automations."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"automation-list",children:(0,t.jsx)(n.code,{children:"automation-list"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "action": "ADD_TO_CAMPAIGN",\n  "sourceCampaignId": null,\n  "sourceTagGroupId": null,\n  "sourceFaqGroupId": null,\n  "destinationCampaignId": 7,\n  "destinationTagGroupId": null,\n  "destinationFaqGroupId": null\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Action values:"})," ",(0,t.jsx)(n.code,{children:"ADD_TO_CAMPAIGN"}),", ",(0,t.jsx)(n.code,{children:"REMOVE_FROM_CAMPAIGN"}),", ",(0,t.jsx)(n.code,{children:"COPY_TO_CAMPAIGN"}),", ",(0,t.jsx)(n.code,{children:"MOVE_BETWEEN_TAG_GROUPS"}),", ",(0,t.jsx)(n.code,{children:"MOVE_BETWEEN_FAQ_GROUPS"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"trigger-condition",children:(0,t.jsx)(n.code,{children:"trigger-condition"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "New subscriber check",\n  "conditions": [\n    {\n      "conditionOrder": 0,\n      "logicOperator": null,\n      "triggerType": "CONTACT_SUBSCRIBED",\n      "fieldName": null,\n      "operator": null,\n      "value": null\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h3,{id:"predefined-step-configs-type-auto",children:["Predefined step configs (",(0,t.jsx)(n.code,{children:'type: "auto"'}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["Predefined steps (",(0,t.jsx)(n.code,{children:"isDefault: true"}),") store their config in the ",(0,t.jsx)(n.code,{children:"AutomationStep.config"})," JSON column. The config starts empty (",(0,t.jsx)(n.code,{children:"{}"}),") and is filled via ",(0,t.jsx)(n.code,{children:"PATCH /automations/:id/steps/:stepId"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Refer to the ",(0,t.jsx)(n.a,{href:"/backend-docs/docs/automations/campaign-templates",children:"Automation Categories guide"})," for the full per-step config shape reference."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"trigger-types",children:"Trigger Types"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Value"}),(0,t.jsx)(n.th,{children:"Meaning"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CONTACT_SUBSCRIBED"})}),(0,t.jsx)(n.td,{children:"Contact joins a campaign"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CONTACT_UNSUBSCRIBED"})}),(0,t.jsx)(n.td,{children:"Contact leaves a campaign"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TAG_APPLIED"})}),(0,t.jsx)(n.td,{children:"A tag is applied to a contact"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TAG_REMOVED"})}),(0,t.jsx)(n.td,{children:"A tag is removed from a contact"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"INACTIVITY"})}),(0,t.jsx)(n.td,{children:"Contact inactive for N days"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"FORM_SUBMITTED"})}),(0,t.jsx)(n.td,{children:"Form submission received"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CHAT_INITIATED"})}),(0,t.jsx)(n.td,{children:"Chat started"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"FAQ_TRIGGERED"})}),(0,t.jsx)(n.td,{children:"FAQ trigger fired"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"MANUAL"})}),(0,t.jsx)(n.td,{children:"Manually triggered"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,t.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsx)(n.p,{children:"All endpoints require a valid session / JWT."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Authorization: Bearer <token>\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"get-category-definitions",children:"Get category definitions"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /automations/categories\n"})}),"\n",(0,t.jsx)(n.p,{children:"Static response \u2014 no DB query. Returns 4 category objects, each with their predefined step shapes."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Response ",(0,t.jsx)(n.code,{children:"200"})]})," \u2014 see ",(0,t.jsx)(n.a,{href:"/backend-docs/docs/automations/campaign-templates",children:"Automation Categories guide"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"create-automation",children:"Create automation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"POST /automations\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Minimum body:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My SLG Setup",\n  "automationCategory": "SALES_LEAD_GENERATION"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Full body (all optional fields):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My SLG Setup",\n  "automationCategory": "SALES_LEAD_GENERATION",\n  "description": "Optional",\n  "startType": "TRIGGER_BASED",\n  "sourceFilterEnabled": false,\n  "allowedSources": [],\n  "inactivityFilterEnabled": false,\n  "inactivityThreshold": null,\n  "inactivityUnit": null,\n  "tagFilterEnabled": false,\n  "allowedTagIds": [],\n  "statusFilterEnabled": false,\n  "allowedStatuses": [],\n  "triggers": [\n    {\n      "triggerType": "INACTIVITY",\n      "name": "30-day inactive",\n      "conditions": [\n        {\n          "conditionOrder": 0,\n          "logicOperator": null,\n          "operator": "GREATER_THAN",\n          "value": "30"\n        }\n      ]\n    }\n  ],\n  "steps": []\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Constraints:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," and ",(0,t.jsx)(n.code,{children:"automationCategory"})," are required."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"triggers"})," is optional \u2014 max 1 if provided."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"steps"})," is optional \u2014 these are appended after the auto-created predefined steps."]}),"\n",(0,t.jsxs)(n.li,{children:["For ",(0,t.jsx)(n.code,{children:"SALES_LEAD_GENERATION"}),", ",(0,t.jsx)(n.code,{children:"SUPPORT_ESCALATION"}),", ",(0,t.jsx)(n.code,{children:"RETENTION_NURTURE"}),": backend auto-creates predefined steps with ",(0,t.jsx)(n.code,{children:"isTemplatePrefilled: true"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["For ",(0,t.jsx)(n.code,{children:"REENGAGEMENT_CAMPAIGNS"}),": blank slate \u2014 add steps manually afterward."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Response ",(0,t.jsx)(n.code,{children:"201"})]})," \u2014 raw automation record. Fetch ",(0,t.jsx)(n.code,{children:"GET /automations/:id"})," for the full ",(0,t.jsx)(n.code,{children:"{ logic, layout }"})," output."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"list-automations",children:"List automations"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /automations\nGET /automations?category=SALES_LEAD_GENERATION\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Query param"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Required"}),(0,t.jsx)(n.th,{children:"Notes"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"category"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AutomationTemplateCategory"})}),(0,t.jsx)(n.td,{children:"no"}),(0,t.jsx)(n.td,{children:"Filter by category"})]})})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Response ",(0,t.jsx)(n.code,{children:"200"})]})," \u2014 array of ",(0,t.jsx)(n.code,{children:"AutomationResponse"})," (full ",(0,t.jsx)(n.code,{children:"{ logic, layout }"})," contract for each)."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"get-single-automation",children:"Get single automation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /automations/:id\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Response ",(0,t.jsx)(n.code,{children:"200"})]})," \u2014 single ",(0,t.jsx)(n.code,{children:"AutomationResponse"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example response for an SLG automation:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": 45,\n  "name": "My SLG Setup",\n  "description": null,\n  "category": "sales-and-lead-generation",\n  "status": "DRAFT",\n  "logicVersion": "1.0.0",\n  "logic": {\n    "version": "1.0.0",\n    "trigger": null,\n    "steps": [\n      {\n        "id": "200",\n        "type": "auto",\n        "stepKey": "slg-webchat-install",\n        "label": "Add BeeBot to Your Website",\n        "order": 0,\n        "config": {},\n        "nextStepIds": ["201"],\n        "completionStatus": "pending",\n        "isDefault": true,\n        "locked": true,\n        "required": true\n      },\n      {\n        "id": "201",\n        "type": "auto",\n        "stepKey": "slg-consent-flow",\n        "label": "Smart Consent Flow",\n        "order": 1,\n        "config": {},\n        "nextStepIds": ["202"],\n        "completionStatus": "pending",\n        "isDefault": true,\n        "locked": true,\n        "required": true\n      }\n    ]\n  },\n  "layout": null,\n  "_count": { "executions": 0 },\n  "createdAt": "2026-02-26T10:00:00.000Z",\n  "updatedAt": "2026-02-26T10:00:00.000Z"\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"update-step-configuration",children:"Update step configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"PATCH /automations/:id/steps/:stepId\n"})}),"\n",(0,t.jsx)(n.p,{children:"Unified endpoint for configuring any step:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Predefined steps"})," (",(0,t.jsx)(n.code,{children:'type: "auto"'}),", ",(0,t.jsx)(n.code,{children:"SLG_*"})," / ",(0,t.jsx)(n.code,{children:"SE_*"})," / ",(0,t.jsx)(n.code,{children:"RN_*"}),"): writes to the ",(0,t.jsx)(n.code,{children:"AutomationStep.config"})," JSON column."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Standard steps"})," (",(0,t.jsx)(n.code,{children:"SEND_MESSAGE"}),", ",(0,t.jsx)(n.code,{children:"WAIT"}),", etc.): writes to the relevant polymorphic config model."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request body"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "config": {\n    "websiteUrl": "https://example.com",\n    "installVerified": false\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Note: the ",(0,t.jsx)(n.code,{children:"stepId"})," in the URL is the integer DB ID \u2014 parse ",(0,t.jsx)(n.code,{children:"LogicStep.id"})," (which is a string) to int."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Response ",(0,t.jsx)(n.code,{children:"200"})]})," \u2014 the updated step record."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"update-automation",children:"Update automation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"PUT /automations/:id\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Partial update of automation metadata, triggers, and steps. When ",(0,t.jsx)(n.code,{children:"triggers"})," or ",(0,t.jsx)(n.code,{children:"steps"})," are provided, existing records are ",(0,t.jsx)(n.strong,{children:"deleted and recreated"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"delete-automation",children:"Delete automation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"DELETE /automations/:id\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Response ",(0,t.jsx)(n.code,{children:"200"})]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{ "message": "Automation deleted successfully" }\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"update-status",children:"Update status"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"PATCH /automations/:id/status\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{ "status": "ACTIVE" }\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Response ",(0,t.jsx)(n.code,{children:"200"})]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": 45,\n  "status": "ACTIVE",\n  "updatedAt": "2026-02-26T12:00:00.000Z"\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"save-canvas-layout",children:"Save canvas layout"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"PATCH /automations/:id/layout\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Call this ",(0,t.jsx)(n.strong,{children:"debounced"})," (e.g. 1 second after last drag). The backend stores the JSON opaquely."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "layout": {\n    "viewport": { "x": -120, "y": -80, "zoom": 0.85 },\n    "nodes": {\n      "200": { "x": 400, "y": 100 },\n      "201": { "x": 400, "y": 250 }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"add-a-step",children:"Add a step"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"POST /automations/:id/steps\n"})}),"\n",(0,t.jsx)(n.p,{children:"Add a non-predefined step. Step order must not conflict with existing steps."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "stepOrder": 12,\n  "stepType": "SEND_MESSAGE",\n  "name": "Follow-up Email",\n  "messageConfig": {\n    "messageType": "MARKETING_EMAIL",\n    "emailTemplateId": 8\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"update-a-step-full-replace",children:"Update a step (full replace)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"PUT /automations/:id/steps/:stepId\n"})}),"\n",(0,t.jsx)(n.p,{children:"Replaces the step's metadata and config. Same body shape as add-step."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"delete-a-step",children:"Delete a step"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"DELETE /automations/:id/steps/:stepId\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"reorder-a-step",children:"Reorder a step"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"PATCH /automations/:id/steps/:stepId/reorder\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{ "newStepOrder": 3 }\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"execution-endpoints",children:"Execution endpoints"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'GET  /automations/:id/executions?page=1&limit=20\nPOST /automations/:id/test   { "customerId": 123 }\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"execution-routing",children:"Execution Routing"}),"\n",(0,t.jsx)(n.h3,{id:"linear-automations-slg-se-rn-non-template",children:"Linear automations (SLG, SE, RN, non-template)"}),"\n",(0,t.jsxs)(n.p,{children:["Execution advances ",(0,t.jsx)(n.code,{children:"stepOrder N"})," \u2192 ",(0,t.jsx)(n.code,{children:"stepOrder N+1"})," sequentially. ",(0,t.jsx)(n.code,{children:"SMART_RULE"})," steps still evaluate but do not branch (true/false paths are ignored)."]}),"\n",(0,t.jsx)(n.h3,{id:"reengagement-automations",children:"Reengagement automations"}),"\n",(0,t.jsxs)(n.p,{children:["Steps carry explicit ",(0,t.jsx)(n.code,{children:"nextStepId"})," edges. The engine follows:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"currentStep.nextStepId"})," \u2192 next step (or stops if null)"]}),"\n",(0,t.jsxs)(n.li,{children:["For ",(0,t.jsx)(n.code,{children:"SMART_RULE"})," steps: follows ",(0,t.jsx)(n.code,{children:"trueNextStepId"})," or ",(0,t.jsx)(n.code,{children:"falseNextStepId"})," from ",(0,t.jsx)(n.code,{children:"SmartRuleStepConfig"})]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"predefined-isdefault-steps",children:"Predefined (isDefault) Steps"}),"\n",(0,t.jsxs)(n.p,{children:["When an automation is created under SLG, SE, or RN, the backend auto-creates predefined steps with ",(0,t.jsx)(n.code,{children:"isTemplatePrefilled: true"}),". In the response this maps to:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "isDefault": true,\n  "locked": true,\n  "required": true\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"UI implications:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Position cannot be changed"}),"\n",(0,t.jsx)(n.li,{children:"Cannot be deleted"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"config"})," can be edited via ",(0,t.jsx)(n.code,{children:"PATCH /automations/:id/steps/:stepId"})]}),"\n",(0,t.jsx)(n.li,{children:"Additional steps can be appended after all predefined steps"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"filter-options-automation-level",children:"Filter Options (Automation-level)"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sourceFilterEnabled"})}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"Restrict to specific lead sources"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"allowedSources"})}),(0,t.jsx)(n.td,{children:"string[]"}),(0,t.jsx)(n.td,{children:"Allowed source identifiers"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"inactivityFilterEnabled"})}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"Only run for contacts inactive for N units"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"inactivityThreshold"})}),(0,t.jsx)(n.td,{children:"number"}),(0,t.jsx)(n.td,{children:"Threshold value"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"inactivityUnit"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:'"MINUTES"'})," | ",(0,t.jsx)(n.code,{children:'"HOURS"'})," | ",(0,t.jsx)(n.code,{children:'"DAYS"'})," | ",(0,t.jsx)(n.code,{children:'"WEEKS"'})," | ",(0,t.jsx)(n.code,{children:'"MONTHS"'})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tagFilterEnabled"})}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"Restrict to contacts with specific tags"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"allowedTagIds"})}),(0,t.jsx)(n.td,{children:"number[]"}),(0,t.jsx)(n.td,{children:"Allowed tag IDs"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"statusFilterEnabled"})}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"Restrict to contacts with specific statuses"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"allowedStatuses"})}),(0,t.jsx)(n.td,{children:"string[]"}),(0,t.jsxs)(n.td,{children:["Allowed ",(0,t.jsx)(n.code,{children:"CustomerStatusType"})," values"]})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Status"}),(0,t.jsx)(n.th,{children:"Scenario"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"400"})}),(0,t.jsxs)(n.td,{children:["Missing ",(0,t.jsx)(n.code,{children:"name"})," or ",(0,t.jsx)(n.code,{children:"automationCategory"})," / more than 1 trigger / invalid step config"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"404"})}),(0,t.jsx)(n.td,{children:"Automation or step not found or belongs to another user"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"typescript-reference",children:"TypeScript Reference"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'type AutomationStatus = "DRAFT" | "ACTIVE" | "PAUSED" | "ARCHIVED";\n\ntype AutomationTemplateCategory =\n  | "SALES_LEAD_GENERATION"\n  | "SUPPORT_ESCALATION"\n  | "RETENTION_NURTURE"\n  | "REENGAGEMENT_CAMPAIGNS";\n\ntype CategorySlug =\n  | "sales-and-lead-generation"\n  | "support-escalation"\n  | "retention-nurture"\n  | "reengagement-campaigns";\n\ntype StepTypeRole = "action" | "condition" | "auto";\ntype CompletionStatus = "pending" | "configured"; // "error" is client-side only\n\ninterface TriggerNode {\n  id: string;\n  type: string; // AutomationTriggerType enum value\n  stepKey: "trigger";\n  label: string;\n  conditions: TriggerCondition[];\n}\n\ninterface LogicStep {\n  id: string; // stringified DB id \u2014 parse to int for PATCH endpoint\n  type: StepTypeRole;\n  stepKey: string;\n  label: string;\n  order: number;\n  config: Record<string, any>;\n  nextStepIds: string[];\n  completionStatus: CompletionStatus;\n  isDefault: boolean;\n  locked: boolean;\n  required: boolean;\n}\n\ninterface AutomationResponse {\n  id: number;\n  name: string;\n  description: string | null;\n  category: CategorySlug | null;\n  status: AutomationStatus;\n  logicVersion: string;\n  logic: {\n    version: string;\n    trigger: TriggerNode | null;\n    steps: LogicStep[];\n  };\n  layout: Record<string, any> | null;\n  _count?: { executions: number };\n  createdAt: string;\n  updatedAt: string;\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"quick-start-examples",children:"Quick-start Examples"}),"\n",(0,t.jsx)(n.h3,{id:"create-and-configure-an-slg-automation",children:"Create and configure an SLG automation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// 1. Get category definitions (optional \u2014 for displaying step list in UI)\nconst categories = await fetch("/automations/categories").then((r) => r.json());\nconst slg = categories.find((c) => c.category === "SALES_LEAD_GENERATION");\n\n// 2. Create automation (backend auto-populates 10 predefined steps)\nconst { id } = await fetch("/automations", {\n  method: "POST",\n  body: JSON.stringify({\n    name: "My SLG Setup",\n    automationCategory: "SALES_LEAD_GENERATION",\n  }),\n}).then((r) => r.json());\n\n// 3. Get automation with predefined steps\nconst automation = await fetch(`/automations/${id}`).then((r) => r.json());\n// automation.logic.steps \u2192 10 steps, all type: "auto", completionStatus: "pending"\n\n// 4. Configure step 0 (webchat install)\nconst stepId = parseInt(automation.logic.steps[0].id);\nawait fetch(`/automations/${id}/steps/${stepId}`, {\n  method: "PATCH",\n  body: JSON.stringify({\n    config: { websiteUrl: "https://example.com", installVerified: false },\n  }),\n});\n\n// 5. Activate when all steps configured\nawait fetch(`/automations/${id}/status`, {\n  method: "PATCH",\n  body: JSON.stringify({ status: "ACTIVE" }),\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"create-a-blank-reengagement-automation",children:"Create a blank Reengagement automation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'const { id } = await fetch("/automations", {\n  method: "POST",\n  body: JSON.stringify({\n    name: "Win-back Campaign",\n    automationCategory: "REENGAGEMENT_CAMPAIGNS",\n  }),\n}).then((r) => r.json());\n// automation has 0 steps \u2014 add freely via POST /automations/:id/steps\n'})}),"\n",(0,t.jsx)(n.h3,{id:"saving-canvas-layout-debounced",children:"Saving canvas layout (debounced)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'let saveTimer: ReturnType<typeof setTimeout>;\n\nfunction onCanvasDrag(automationId: number, layout: CanvasLayout) {\n  clearTimeout(saveTimer);\n  saveTimer = setTimeout(() => {\n    fetch(`/automations/${automationId}/layout`, {\n      method: "PATCH",\n      body: JSON.stringify({ layout }),\n    });\n  }, 1000);\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);