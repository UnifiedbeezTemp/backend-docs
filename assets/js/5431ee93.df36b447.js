"use strict";(globalThis.webpackChunkbackend_docs=globalThis.webpackChunkbackend_docs||[]).push([[7218],{4273:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"smart-suggestion-beebot","title":"Channel AI Recommendations API Documentation","description":"Overview","source":"@site/docs/smart-suggestion-beebot.md","sourceDirName":".","slug":"/smart-suggestion-beebot","permalink":"/backend-docs/docs/smart-suggestion-beebot","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/smart-suggestion-beebot.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"tutorialSidebar","previous":{"title":"Copilot Onboarding - Frontend Integration Guide","permalink":"/backend-docs/docs/copilot-integration"}}');var i=s(4848),c=s(8453);const t={sidebar_position:11},d="Channel AI Recommendations API Documentation",o={},l=[{value:"Overview",id:"overview",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"1. Get Recommendations",id:"1-get-recommendations",level:3},{value:"2. Apply Recommendations",id:"2-apply-recommendations",level:3},{value:"Integration Flow",id:"integration-flow",level:2},{value:"1. Screen Load",id:"1-screen-load",level:3},{value:"2. Toggle &quot;Use Recommended Settings&quot;",id:"2-toggle-use-recommended-settings",level:3},{value:"3. Manual Edit Detection",id:"3-manual-edit-detection",level:3},{value:"Screen Categories",id:"screen-categories",level:2},{value:"Error Responses",id:"error-responses",level:2},{value:"Notes",id:"notes",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"channel-ai-recommendations-api-documentation",children:"Channel AI Recommendations API Documentation"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Get and apply AI configuration recommendations based on user's industry and plan. Recommendations are screen-specific and apply immediately when toggled."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"1-get-recommendations",children:"1. Get Recommendations"}),"\n",(0,i.jsx)(n.p,{children:"Fetch recommended settings for a specific configuration screen."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /channels/:channelId/ai-config/:aiId/recommendations\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"channelId"}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Channel ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aiId"}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"AI Assistant ID"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"timezone"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:'User\'s timezone (e.g., "America/New_York")'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"category"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsxs)(n.td,{children:["Screen category: ",(0,i.jsx)(n.code,{children:"main-config"}),", ",(0,i.jsx)(n.code,{children:"escalation-rules"}),", ",(0,i.jsx)(n.code,{children:"follow-up-triggers"}),", ",(0,i.jsx)(n.code,{children:"ai-behaviour-settings"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"accountId"}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Account ID (for channel accounts)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"accountType"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsxs)(n.td,{children:["Account type: ",(0,i.jsx)(n.code,{children:"whatsapp"}),", ",(0,i.jsx)(n.code,{children:"facebook"}),", ",(0,i.jsx)(n.code,{children:"email"}),", ",(0,i.jsx)(n.code,{children:"sms"}),", ",(0,i.jsx)(n.code,{children:"calendar"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"webchatId"}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Webchat ID (for webchat)"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response by Category:"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"main-config"})})," (Screen 1):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "escalationEnabled": true,\n  "followUpEnabled": true,\n  "replyDelayAmount": 5,\n  "replyDelayUnit": "SECONDS",\n  "teamAccess": [\n    {\n      "teamMemberId": 1,\n      "email": "member@example.com",\n      "fullName": "John Doe",\n      "canView": true,\n      "canModify": true\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"escalation-rules"})})," (Screen 2):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "unansweredMessagesThreshold": 3,\n  "escalationKeywords": ["urgent", "emergency", "help"],\n  "escalationTimeAmount": 15,\n  "escalationTimeUnit": "MINUTES",\n  "escalationContacts": [\n    {\n      "email": "support@example.com",\n      "fullName": "Support Team"\n    }\n  ],\n  "escalateToAllMembers": false\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"follow-up-triggers"})})," (Screen 3):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "followUpEnabled": true,\n  "followUpDelayAmount": 24,\n  "followUpDelayUnit": "HOURS",\n  "followUpContentType": "SUPPORT"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"ai-behaviour-settings"})})," (Screen 4):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "replyDelayAmount": 5,\n  "replyDelayUnit": "SECONDS",\n  "workingDays": ["MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY"],\n  "timezone": "America/New_York",\n  "openingHour": 9,\n  "closingHour": 17\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Screen 1 - Main Config\nGET /channels/1/ai-config/2/recommendations?timezone=America/New_York&category=main-config\n\n// Screen 2 - Escalation Rules for WhatsApp account\nGET /channels/1/ai-config/2/recommendations?timezone=Europe/London&category=escalation-rules&accountId=5&accountType=whatsapp\n\n// Screen 3 - Follow-up Triggers\nGET /channels/1/ai-config/2/recommendations?timezone=Asia/Tokyo&category=follow-up-triggers\n\n// Screen 4 - AI Behaviour Settings\nGET /channels/1/ai-config/2/recommendations?timezone=America/Los_Angeles&category=ai-behaviour-settings\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"2-apply-recommendations",children:"2. Apply Recommendations"}),"\n",(0,i.jsx)(n.p,{children:'Apply recommended settings for a specific screen. Called when user toggles "Use Recommended Settings".'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"PATCH /channels/:channelId/ai-config/:aiId/apply-recommendations\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"channelId"}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Channel ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aiId"}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"AI Assistant ID"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"accountId"}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Account ID (for channel accounts)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"accountType"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsxs)(n.td,{children:["Account type: ",(0,i.jsx)(n.code,{children:"whatsapp"}),", ",(0,i.jsx)(n.code,{children:"facebook"}),", ",(0,i.jsx)(n.code,{children:"email"}),", ",(0,i.jsx)(n.code,{children:"sms"}),", ",(0,i.jsx)(n.code,{children:"calendar"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"webchatId"}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Webchat ID (for webchat)"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "timezone": "America/New_York",\n  "category": "main-config"\n}\n'})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Options"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"timezone"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:'IANA timezone (e.g., "America/New_York")'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"category"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"main-config"}),", ",(0,i.jsx)(n.code,{children:"escalation-rules"}),", ",(0,i.jsx)(n.code,{children:"follow-up-triggers"}),", ",(0,i.jsx)(n.code,{children:"ai-behaviour-settings"})]})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "message": "Recommendations for main-config applied successfully",\n  "config": {\n    "id": 123,\n    "escalationEnabled": true,\n    "followUpEnabled": true,\n    "isRecommendation": true,\n    "fieldSources": {\n      "escalationEnabled": "RECOMMENDED",\n      "followUpEnabled": "RECOMMENDED"\n    },\n    "recommendationAppliedAt": "2025-01-15T10:30:00.000Z",\n    "recommendationVersion": "1.0"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// Apply Screen 1 recommendations\nPATCH /channels/1/ai-config/2/apply-recommendations\nBody: {\n  "timezone": "America/New_York",\n  "category": "main-config"\n}\n\n// Apply Screen 2 recommendations for WhatsApp\nPATCH /channels/1/ai-config/2/apply-recommendations?accountId=5&accountType=whatsapp\nBody: {\n  "timezone": "Europe/London",\n  "category": "escalation-rules"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"integration-flow",children:"Integration Flow"}),"\n",(0,i.jsx)(n.h3,{id:"1-screen-load",children:"1. Screen Load"}),"\n",(0,i.jsx)(n.p,{children:"When user navigates to a configuration screen:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Get user's timezone\nconst timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n// Fetch recommendations for current screen\nconst response = await fetch(\n  `/channels/${channelId}/ai-config/${aiId}/recommendations?timezone=${timezone}&category=${category}`\n);\nconst recommendations = await response.json();\n\n// Populate form fields with recommendations\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-toggle-use-recommended-settings",children:'2. Toggle "Use Recommended Settings"'}),"\n",(0,i.jsx)(n.p,{children:"When user toggles the switch ON:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\nawait fetch(`/channels/${channelId}/ai-config/${aiId}/apply-recommendations`, {\n  method: "PATCH",\n  headers: { "Content-Type": "application/json" },\n  body: JSON.stringify({\n    timezone,\n    category: "main-config", // or current screen category\n  }),\n});\n\n// Settings applied immediately - refresh form or navigate to next screen\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-manual-edit-detection",children:"3. Manual Edit Detection"}),"\n",(0,i.jsx)(n.p,{children:"When user manually changes any field after applying recommendations:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// The backend automatically tracks this\n// fieldSources will update from "RECOMMENDED" to "CUSTOM" for edited fields\n// Audit logs are created automatically\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"screen-categories",children:"Screen Categories"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Category"}),(0,i.jsx)(n.th,{children:"Screen"}),(0,i.jsx)(n.th,{children:"Fields Applied"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"main-config"})}),(0,i.jsx)(n.td,{children:"Screen 1"}),(0,i.jsx)(n.td,{children:"escalationEnabled, followUpEnabled, replyDelayAmount, replyDelayUnit, teamAccess"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"escalation-rules"})}),(0,i.jsx)(n.td,{children:"Screen 2"}),(0,i.jsx)(n.td,{children:"unansweredMessagesThreshold, escalationKeywords, escalationTimeAmount, escalationTimeUnit, escalationContacts, escalateToAllMembers"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"follow-up-triggers"})}),(0,i.jsx)(n.td,{children:"Screen 3"}),(0,i.jsx)(n.td,{children:"followUpEnabled, followUpDelayAmount, followUpDelayUnit, followUpContentType"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ai-behaviour-settings"})}),(0,i.jsx)(n.td,{children:"Screen 4"}),(0,i.jsx)(n.td,{children:"replyDelayAmount, replyDelayUnit, workingDays, timezone, openingHour, closingHour"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "statusCode": 400,\n  "message": "timezone is required"\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "statusCode": 400,\n  "message": "Invalid category. Must be one of: main-config, escalation-rules, follow-up-triggers, ai-behaviour-settings"\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "statusCode": 404,\n  "message": "Channel not found"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Timezone must be detected from browser: ",(0,i.jsx)(n.code,{children:"Intl.DateTimeFormat().resolvedOptions().timeZone"})]}),"\n",(0,i.jsxs)(n.li,{children:["For React Native: Use ",(0,i.jsx)(n.code,{children:"expo-localization"})," or ",(0,i.jsx)(n.code,{children:"react-native-localize"})]}),"\n",(0,i.jsx)(n.li,{children:"Recommendations vary by user's industry and plan tier"}),"\n",(0,i.jsx)(n.li,{children:"Each screen applies only its own fields"}),"\n",(0,i.jsx)(n.li,{children:"Field tracking is automatic - no additional calls needed"}),"\n",(0,i.jsx)(n.li,{children:"Audit logs are created for both bulk application and individual edits"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var r=s(6540);const i={},c=r.createContext(i);function t(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);