"use strict";(globalThis.webpackChunkbackend_docs=globalThis.webpackChunkbackend_docs||[]).push([[6071],{8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var t=s(6540);const i={},d=t.createContext(i);function r(e){const n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(d.Provider,{value:n},e.children)}},8656:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"automations","title":"Automations \u2014 Frontend Integration Guide","description":"This document covers the full automation API: the { logic, layout } response contract, all endpoints, step types, config shapes, status lifecycle, and execution routing.","source":"@site/docs/automations.md","sourceDirName":".","slug":"/automations","permalink":"/backend-docs/docs/automations","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/automations.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Apple Sign In Integration Guide","permalink":"/backend-docs/docs/apple-integration"},"next":{"title":"Campaign Templates \u2014 Frontend Integration Guide","permalink":"/backend-docs/docs/campaign-templates"}}');var i=s(4848),d=s(8453);const r={},l="Automations \u2014 Frontend Integration Guide",c={},a=[{value:"Response Contract: <code>{ logic, layout }</code>",id:"response-contract--logic-layout-",level:2},{value:"<code>TriggerNode</code>",id:"triggernode",level:3},{value:"<code>LogicStep</code>",id:"logicstep",level:3},{value:"<code>CanvasLayout</code>",id:"canvaslayout",level:3},{value:"Automation Status Lifecycle",id:"automation-status-lifecycle",level:2},{value:"Category Slugs",id:"category-slugs",level:2},{value:"Step Key Reference",id:"step-key-reference",level:2},{value:"Core step types (any category)",id:"core-step-types-any-category",level:3},{value:"Sales &amp; Lead Generation template steps",id:"sales--lead-generation-template-steps",level:3},{value:"Support Escalation template steps",id:"support-escalation-template-steps",level:3},{value:"Retention &amp; Nurture template steps",id:"retention--nurture-template-steps",level:3},{value:"<code>completionStatus</code> Rules",id:"completionstatus-rules",level:2},{value:"<code>nextStepIds</code> Routing",id:"nextstepids-routing",level:2},{value:"Linear categories (SLG, SE, RN, and non-template automations)",id:"linear-categories-slg-se-rn-and-non-template-automations",level:3},{value:"Reengagement Campaigns (<code>REENGAGEMENT_CAMPAIGNS</code>)",id:"reengagement-campaigns-reengagement_campaigns",level:3},{value:"Step <code>config</code> Shapes",id:"step-config-shapes",level:2},{value:"<code>send-message</code>",id:"send-message",level:3},{value:"<code>wait</code>",id:"wait",level:3},{value:"<code>smart-rule</code>",id:"smart-rule",level:3},{value:"<code>automation-list</code>",id:"automation-list",level:3},{value:"<code>trigger-condition</code>",id:"trigger-condition",level:3},{value:"Template step configs (SLG / SE / RN)",id:"template-step-configs-slg--se--rn",level:3},{value:"Trigger Types",id:"trigger-types",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Create automation",id:"create-automation",level:3},{value:"List automations",id:"list-automations",level:3},{value:"Get single automation",id:"get-single-automation",level:3},{value:"Update automation",id:"update-automation",level:3},{value:"Delete automation",id:"delete-automation",level:3},{value:"Update status",id:"update-status",level:3},{value:"Save canvas layout",id:"save-canvas-layout",level:3},{value:"Add a step",id:"add-a-step",level:3},{value:"Update a step",id:"update-a-step",level:3},{value:"Delete a step",id:"delete-a-step",level:3},{value:"Execution endpoints",id:"execution-endpoints",level:3},{value:"List executions for an automation",id:"list-executions-for-an-automation",level:4},{value:"Get execution details",id:"get-execution-details",level:4},{value:"Trigger manual execution",id:"trigger-manual-execution",level:4},{value:"Execution Routing",id:"execution-routing",level:2},{value:"Linear automations (SLG, SE, RN, non-template)",id:"linear-automations-slg-se-rn-non-template",level:3},{value:"Reengagement automations",id:"reengagement-automations",level:3},{value:"Template-Prefilled Steps",id:"template-prefilled-steps",level:2},{value:"Filter Options (Automation-level)",id:"filter-options-automation-level",level:2},{value:"Common Response Shapes",id:"common-response-shapes",level:2},{value:"<code>TriggerCondition</code>",id:"triggercondition",level:3},{value:"Error Responses",id:"error-responses",level:2},{value:"TypeScript Reference",id:"typescript-reference",level:2},{value:"Quick-start Examples",id:"quick-start-examples",level:2},{value:"Creating and activating a simple email automation",id:"creating-and-activating-a-simple-email-automation",level:3},{value:"Creating a template-based automation",id:"creating-a-template-based-automation",level:3},{value:"Saving canvas layout (debounced)",id:"saving-canvas-layout-debounced",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"automations--frontend-integration-guide",children:"Automations \u2014 Frontend Integration Guide"})}),"\n",(0,i.jsxs)(n.p,{children:["This document covers the full automation API: the ",(0,i.jsx)(n.code,{children:"{ logic, layout }"})," response contract, all endpoints, step types, config shapes, status lifecycle, and execution routing."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"response-contract--logic-layout-",children:["Response Contract: ",(0,i.jsx)(n.code,{children:"{ logic, layout }"})]}),"\n",(0,i.jsxs)(n.p,{children:["Every ",(0,i.jsx)(n.code,{children:"GET /automations"})," and ",(0,i.jsx)(n.code,{children:"GET /automations/:id"})," response uses this shape:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'interface AutomationResponse {\n  id: number;\n  name: string;\n  description: string | null;\n  category: CategorySlug | null;     // kebab-case string, see Category Slugs\n  status: AutomationStatus;          // "DRAFT" | "ACTIVE" | "PAUSED" | "ARCHIVED"\n  logicVersion: string;              // e.g. "1.0.0"\n  logic: {\n    version: string;\n    trigger: TriggerNode | null;\n    steps: LogicStep[];\n  };\n  layout: CanvasLayout | null;       // opaque JSON, stored as-is\n  _count?: { executions: number };\n  createdAt: string;                 // ISO 8601\n  updatedAt: string;                 // ISO 8601\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"triggernode",children:(0,i.jsx)(n.code,{children:"TriggerNode"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'interface TriggerNode {\n  id: string;                        // stringified trigger DB id\n  type: AutomationTriggerType;       // backend enum\n  stepKey: "trigger";\n  label: string;\n  conditions: TriggerCondition[];\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"logicstep",children:(0,i.jsx)(n.code,{children:"LogicStep"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'interface LogicStep {\n  id: string;                        // stringified step DB id\n  type: AutomationStepType;          // backend enum, ALL_CAPS\n  stepKey: string;                   // kebab-case routing key (see Step Key Reference)\n  label: string;                     // human-readable name\n  order: number;                     // stepOrder from DB (0-based for template steps)\n  config: Record<string, any>;       // flattened step config (see per-step shapes)\n  nextStepIds: string[];             // computed for linear automations; explicit for REENGAGEMENT\n  completionStatus: "pending" | "configured";\n  isDefault: boolean;                // true = step was pre-filled from a template\n  locked: boolean;                   // true = step order is locked (same as isDefault)\n  required: boolean;                 // true = step cannot be removed (same as isDefault)\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"canvaslayout",children:(0,i.jsx)(n.code,{children:"CanvasLayout"})}),"\n",(0,i.jsx)(n.p,{children:"An opaque JSON blob owned by the frontend. The backend stores and returns it without modification."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface CanvasLayout {\n  viewport?: { x: number; y: number; zoom: number };\n  nodes?: Record<string, { x: number; y: number }>;\n  groups?: Record<string, { x: number; y: number; width: number; height: number }>;\n  links?: Record<string, { style?: Record<string, any> }>;\n  [key: string]: any;   // any additional canvas metadata\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"automation-status-lifecycle",children:"Automation Status Lifecycle"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"DRAFT \u2500\u2500activate\u2500\u2500\u25ba ACTIVE \u2500\u2500pause\u2500\u2500\u25ba PAUSED\n  \u25b2                    \u2502                 \u2502\n  \u2502                    \u2514\u2500\u2500archive\u2500\u2500\u25ba  ARCHIVED\n  \u2502                                     \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 (unarchive) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Status"}),(0,i.jsx)(n.th,{children:"Meaning"}),(0,i.jsx)(n.th,{children:"Executions triggered?"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DRAFT"})}),(0,i.jsx)(n.td,{children:"Being configured, not yet live"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ACTIVE"})}),(0,i.jsx)(n.td,{children:"Live \u2014 triggers fire and executions run"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PAUSED"})}),(0,i.jsx)(n.td,{children:"Temporarily suspended"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ARCHIVED"})}),(0,i.jsx)(n.td,{children:"Retired \u2014 no longer runs"}),(0,i.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Change status via ",(0,i.jsx)(n.code,{children:"PATCH /automations/:id/status"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"category-slugs",children:"Category Slugs"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"category"})," field in responses uses kebab-case strings:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"DB enum"}),(0,i.jsx)(n.th,{children:"Response value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SALES_LEAD_GENERATION"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"sales-and-lead-generation"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SUPPORT_ESCALATION"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"support-escalation"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RETENTION_NURTURE"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"retention-nurture"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"REENGAGEMENT_CAMPAIGNS"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"reengagement-campaigns"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"(none set)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"null"})})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"step-key-reference",children:"Step Key Reference"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"stepKey"})," to route to the correct configuration drawer or component in the UI."]}),"\n",(0,i.jsx)(n.h3,{id:"core-step-types-any-category",children:"Core step types (any category)"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.th,{children:[(0,i.jsx)(n.code,{children:"type"})," (DB enum)"]}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"stepKey"})}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEND_MESSAGE"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"send-message"})}),(0,i.jsx)(n.td,{children:"Send email / WhatsApp / SMS"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"WAIT"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"wait"})}),(0,i.jsx)(n.td,{children:"Delay execution"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SMART_RULE"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"smart-rule"})}),(0,i.jsx)(n.td,{children:"Conditional branch"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AUTOMATION_LIST"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"automation-list"})}),(0,i.jsx)(n.td,{children:"Add/remove/move contact in a list"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TRIGGER_CONDITION"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"trigger-condition"})}),(0,i.jsx)(n.td,{children:"Inline trigger check"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TAG_ACTION"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tag-action"})}),(0,i.jsx)(n.td,{children:"Apply or remove a tag"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"STATUS_CHANGE"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"status-change"})}),(0,i.jsx)(n.td,{children:"Update lead status"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"sales--lead-generation-template-steps",children:"Sales & Lead Generation template steps"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"type"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"stepKey"})}),(0,i.jsx)(n.th,{children:"Human name"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_WEBCHAT_INSTALL"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-webchat-install"})}),(0,i.jsx)(n.td,{children:"Add BeeBot to Your Website"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_CONSENT_FLOW"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-consent-flow"})}),(0,i.jsx)(n.td,{children:"Smart Consent Flow"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_SELECT_CHANNELS"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-select-channels"})}),(0,i.jsx)(n.td,{children:"Select Connected Channels"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_SELECT_FAQS"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-select-faqs"})}),(0,i.jsx)(n.td,{children:"Select FAQ Category"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_FORM_INTEGRATION"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-form-integration"})}),(0,i.jsx)(n.td,{children:"Integrate Your Form"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_SENDER_EMAIL"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-sender-email"})}),(0,i.jsx)(n.td,{children:"Configure Sender Email"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_CAMPAIGN_LIST"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-campaign-list"})}),(0,i.jsx)(n.td,{children:"Create Campaign List"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_BEEBOT_HANDLER"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-beebot-handler"})}),(0,i.jsx)(n.td,{children:"Select BeeBot Handler"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_CRM_TAGS"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-crm-tags"})}),(0,i.jsx)(n.td,{children:"CRM Tags / Keywords"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_TAG_NOTIFICATIONS"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-tag-notifications"})}),(0,i.jsx)(n.td,{children:"CRM Tag Notification Settings"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SLG_OUTREACH_EMAIL"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-outreach-email"})}),(0,i.jsx)(n.td,{children:"Build Your Outreach Email"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"support-escalation-template-steps",children:"Support Escalation template steps"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"type"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"stepKey"})}),(0,i.jsx)(n.th,{children:"Human name"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SE_SELECT_CHANNELS"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"se-select-channels"})}),(0,i.jsx)(n.td,{children:"Select Connected Channels"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SE_SELECT_FAQS"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"se-select-faqs"})}),(0,i.jsx)(n.td,{children:"Select FAQ Category"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"retention--nurture-template-steps",children:"Retention & Nurture template steps"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"type"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"stepKey"})}),(0,i.jsx)(n.th,{children:"Human name"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RN_CREATE_CAMPAIGN"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rn-create-campaign"})}),(0,i.jsx)(n.td,{children:"Create Campaign"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RN_CAMPAIGN_CONFIG"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rn-campaign-config"})}),(0,i.jsx)(n.td,{children:"Campaign Configuration"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RN_OUTREACH_EMAIL"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rn-outreach-email"})}),(0,i.jsx)(n.td,{children:"Build Your Outreach Email"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"completionstatus-rules",children:[(0,i.jsx)(n.code,{children:"completionStatus"})," Rules"]}),"\n",(0,i.jsxs)(n.p,{children:["The backend computes ",(0,i.jsx)(n.code,{children:"completionStatus"})," per step based on whether the required config key(s) are populated."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"stepKey"})}),(0,i.jsx)(n.th,{children:"Required key(s)"}),(0,i.jsx)(n.th,{children:"Logic"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"send-message"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"messageType"})}),(0,i.jsx)(n.td,{children:"Any one non-empty"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"wait"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"waitMinutes"}),", ",(0,i.jsx)(n.code,{children:"waitHours"}),", ",(0,i.jsx)(n.code,{children:"waitDays"})]}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.strong,{children:"Any one"})," > 0"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"smart-rule"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"conditions"})}),(0,i.jsx)(n.td,{children:"Non-empty array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"automation-list"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"action"})}),(0,i.jsx)(n.td,{children:"Non-empty"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"trigger-condition"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"conditions"})}),(0,i.jsx)(n.td,{children:"Non-empty array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-webchat-install"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"websiteUrl"})}),(0,i.jsx)(n.td,{children:"Non-empty string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-consent-flow"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"method"})}),(0,i.jsx)(n.td,{children:"Non-empty string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-select-channels"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"channelAccounts"})}),(0,i.jsx)(n.td,{children:"Non-empty array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-select-faqs"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"faqIds"})}),(0,i.jsx)(n.td,{children:"Non-empty array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-form-integration"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"embedUrl"})}),(0,i.jsx)(n.td,{children:"Non-empty string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-sender-email"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"emailConfigId"})}),(0,i.jsx)(n.td,{children:"Non-null"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-campaign-list"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"listIds"})}),(0,i.jsx)(n.td,{children:"Non-empty array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-beebot-handler"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"aiAssistantId"})}),(0,i.jsx)(n.td,{children:"Non-null"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-crm-tags"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tagIds"})}),(0,i.jsx)(n.td,{children:"Non-empty array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-tag-notifications"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"notifications"})}),(0,i.jsx)(n.td,{children:"Non-empty array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slg-outreach-email"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"emailTemplateId"})}),(0,i.jsx)(n.td,{children:"Non-null"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"se-select-channels"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"channelAccounts"})}),(0,i.jsx)(n.td,{children:"Non-empty array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"se-select-faqs"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"faqIds"})}),(0,i.jsx)(n.td,{children:"Non-empty array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rn-create-campaign"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tagIds"})}),(0,i.jsx)(n.td,{children:"Non-empty array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rn-campaign-config"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"leadSourceChannelId"})}),(0,i.jsx)(n.td,{children:"Non-null"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rn-outreach-email"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"emailTemplateId"})}),(0,i.jsx)(n.td,{children:"Non-null"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["A step with ",(0,i.jsx)(n.strong,{children:"no matching entry"})," in the table defaults to ",(0,i.jsx)(n.code,{children:'"configured"'}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"nextstepids-routing",children:[(0,i.jsx)(n.code,{children:"nextStepIds"})," Routing"]}),"\n",(0,i.jsx)(n.h3,{id:"linear-categories-slg-se-rn-and-non-template-automations",children:"Linear categories (SLG, SE, RN, and non-template automations)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"nextStepIds"})," is ",(0,i.jsx)(n.strong,{children:"computed at response time"})," from step order. Each step points to the immediately following step:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'step[order=0] \u2192 nextStepIds: ["<step[order=1].id>"]\nstep[order=1] \u2192 nextStepIds: ["<step[order=2].id>"]\nstep[order=N] \u2192 nextStepIds: []   // last step\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"reengagement-campaigns-reengagement_campaigns",children:["Reengagement Campaigns (",(0,i.jsx)(n.code,{children:"REENGAGEMENT_CAMPAIGNS"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"nextStepIds"})," comes from the ",(0,i.jsxs)(n.strong,{children:["explicitly stored ",(0,i.jsx)(n.code,{children:"nextStepId"})]})," on each ",(0,i.jsx)(n.code,{children:"AutomationStep"}),". Steps that haven't been linked yet have ",(0,i.jsx)(n.code,{children:"nextStepIds: []"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Smart Rule steps in reengagement automations also carry ",(0,i.jsx)(n.code,{children:"trueNextStepId"})," and ",(0,i.jsx)(n.code,{children:"falseNextStepId"})," inside their ",(0,i.jsx)(n.code,{children:"config"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "stepKey": "smart-rule",\n  "config": {\n    "name": "Check lead status",\n    "conditions": [...],\n    "trueNextStepId": 203,\n    "falseNextStepId": 205\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"step-config-shapes",children:["Step ",(0,i.jsx)(n.code,{children:"config"})," Shapes"]}),"\n",(0,i.jsxs)(n.p,{children:["These are the exact objects returned in ",(0,i.jsx)(n.code,{children:"LogicStep.config"})," after the backend flattens the polymorphic step config models."]}),"\n",(0,i.jsx)(n.h3,{id:"send-message",children:(0,i.jsx)(n.code,{children:"send-message"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "messageType": "MARKETING_EMAIL",\n  "emailTemplateId": 14,\n  "customMessage": null,\n  "sendingTime": "09:00"\n}\n'})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsxs)(n.th,{children:[(0,i.jsx)(n.code,{children:"messageType"})," values"]})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"messageType"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:'"MARKETING_EMAIL"'})," | ",(0,i.jsx)(n.code,{children:'"WHATSAPP"'})," | ",(0,i.jsx)(n.code,{children:'"SMS"'})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"emailTemplateId"})}),(0,i.jsx)(n.td,{children:"number | null"}),(0,i.jsxs)(n.td,{children:["Used when ",(0,i.jsx)(n.code,{children:'messageType = "MARKETING_EMAIL"'})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"customMessage"})}),(0,i.jsx)(n.td,{children:"string | null"}),(0,i.jsx)(n.td,{children:"Used for WhatsApp / SMS"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sendingTime"})}),(0,i.jsx)(n.td,{children:"string | null"}),(0,i.jsxs)(n.td,{children:["HH",":MM"," preferred send time"]})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"wait",children:(0,i.jsx)(n.code,{children:"wait"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "waitMinutes": null,\n  "waitHours": null,\n  "waitDays": 3,\n  "waitUntilTime": null,\n  "waitUntilDay": null\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Only one of ",(0,i.jsx)(n.code,{children:"waitMinutes"}),", ",(0,i.jsx)(n.code,{children:"waitHours"}),", ",(0,i.jsx)(n.code,{children:"waitDays"})," needs to be set. ",(0,i.jsx)(n.code,{children:"waitUntilTime"})," (HH",":MM",") and ",(0,i.jsx)(n.code,{children:"waitUntilDay"})," (day-of-week string) are optional scheduling constraints."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"smart-rule",children:(0,i.jsx)(n.code,{children:"smart-rule"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "VIP Check",\n  "conditions": [\n    {\n      "conditionOrder": 0,\n      "logicOperator": "AND",\n      "conditionType": "field",\n      "fieldName": "leadStatus",\n      "operator": "EQUALS",\n      "value": "qualified"\n    }\n  ],\n  "trueNextStepId": null,\n  "falseNextStepId": null\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"trueNextStepId"})," and ",(0,i.jsx)(n.code,{children:"falseNextStepId"})," are only relevant (and non-null) for ",(0,i.jsx)(n.code,{children:"REENGAGEMENT_CAMPAIGNS"})," automations."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Condition operators"})," (ConditionOperator enum):\n",(0,i.jsx)(n.code,{children:"EQUALS"}),", ",(0,i.jsx)(n.code,{children:"NOT_EQUALS"}),", ",(0,i.jsx)(n.code,{children:"CONTAINS"}),", ",(0,i.jsx)(n.code,{children:"NOT_CONTAINS"}),", ",(0,i.jsx)(n.code,{children:"GREATER_THAN"}),", ",(0,i.jsx)(n.code,{children:"LESS_THAN"}),", ",(0,i.jsx)(n.code,{children:"IS_EMPTY"}),", ",(0,i.jsx)(n.code,{children:"IS_NOT_EMPTY"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Condition types:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"trigger"'})," \u2014 references an ",(0,i.jsx)(n.code,{children:"AutomationTriggerType"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"campaign"'})," \u2014 references a campaign via ",(0,i.jsx)(n.code,{children:"targetCampaignId"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"field"'})," \u2014 references a lead field via ",(0,i.jsx)(n.code,{children:"fieldName"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"automation-list",children:(0,i.jsx)(n.code,{children:"automation-list"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "action": "ADD_TO_CAMPAIGN",\n  "sourceCampaignId": null,\n  "sourceTagGroupId": null,\n  "sourceFaqGroupId": null,\n  "destinationCampaignId": 7,\n  "destinationTagGroupId": null,\n  "destinationFaqGroupId": null\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Action values"})," (",(0,i.jsx)(n.code,{children:"AutomationListAction"})," enum):"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Value"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ADD_TO_CAMPAIGN"})}),(0,i.jsx)(n.td,{children:"Add contact to a campaign"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"REMOVE_FROM_CAMPAIGN"})}),(0,i.jsx)(n.td,{children:"Remove contact from a campaign"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"COPY_TO_CAMPAIGN"})}),(0,i.jsx)(n.td,{children:"Copy contact to another campaign"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"MOVE_BETWEEN_TAG_GROUPS"})}),(0,i.jsx)(n.td,{children:"Move between tag groups"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"MOVE_BETWEEN_FAQ_GROUPS"})}),(0,i.jsx)(n.td,{children:"Move between FAQ groups"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"trigger-condition",children:(0,i.jsx)(n.code,{children:"trigger-condition"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "New subscriber check",\n  "conditions": [\n    {\n      "conditionOrder": 0,\n      "logicOperator": null,\n      "triggerType": "CONTACT_SUBSCRIBED",\n      "fieldName": null,\n      "operator": null,\n      "value": null\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"template-step-configs-slg--se--rn",children:"Template step configs (SLG / SE / RN)"}),"\n",(0,i.jsxs)(n.p,{children:["Template steps (",(0,i.jsx)(n.code,{children:"isDefault: true"}),") have their configuration stored in the parent ",(0,i.jsx)(n.code,{children:"CampaignTemplateStepConfig.config"})," JSON. Because these steps are created from templates rather than through the standard step config models, their ",(0,i.jsx)(n.code,{children:"config"})," field may be an empty object ",(0,i.jsx)(n.code,{children:"{}"})," until the user edits the step within the automation."]}),"\n",(0,i.jsxs)(n.p,{children:["Refer to the ",(0,i.jsx)(n.a,{href:"/backend-docs/docs/campaign-templates",children:"Campaign Templates guide"})," for the full per-step config shape reference."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"trigger-types",children:"Trigger Types"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"trigger.type"})," field uses the ",(0,i.jsx)(n.code,{children:"AutomationTriggerType"})," enum:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Value"}),(0,i.jsx)(n.th,{children:"Meaning"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"CONTACT_SUBSCRIBED"})}),(0,i.jsx)(n.td,{children:"Contact joins a campaign"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"CONTACT_UNSUBSCRIBED"})}),(0,i.jsx)(n.td,{children:"Contact leaves a campaign"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TAG_APPLIED"})}),(0,i.jsx)(n.td,{children:"A tag is applied to a contact"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TAG_REMOVED"})}),(0,i.jsx)(n.td,{children:"A tag is removed from a contact"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"INACTIVITY"})}),(0,i.jsx)(n.td,{children:"Contact inactive for N days"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"FORM_SUBMITTED"})}),(0,i.jsx)(n.td,{children:"Form submission received"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"CHAT_INITIATED"})}),(0,i.jsx)(n.td,{children:"Chat started"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"FAQ_TRIGGERED"})}),(0,i.jsx)(n.td,{children:"FAQ trigger fired"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"MANUAL"})}),(0,i.jsx)(n.td,{children:"Manually triggered"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,i.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,i.jsx)(n.p,{children:"All endpoints require a valid session / JWT."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Authorization: Bearer <token>\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"create-automation",children:"Create automation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"POST /automations\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Creates an automation from scratch (not from a template). For template-based automations see ",(0,i.jsx)(n.a,{href:"/backend-docs/docs/campaign-templates",children:"Campaign Templates guide"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request body"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Re-engage cold leads",\n  "description": "Optional",\n  "startType": "TRIGGER_BASED",\n  "campaignId": 5,\n  "sourceFilterEnabled": false,\n  "allowedSources": [],\n  "inactivityFilterEnabled": false,\n  "inactivityThreshold": null,\n  "inactivityUnit": null,\n  "tagFilterEnabled": false,\n  "allowedTagIds": [],\n  "statusFilterEnabled": false,\n  "allowedStatuses": [],\n  "triggers": [\n    {\n      "triggerType": "INACTIVITY",\n      "name": "30-day inactive",\n      "conditions": [\n        {\n          "conditionOrder": 0,\n          "logicOperator": null,\n          "fieldName": null,\n          "operator": "GREATER_THAN",\n          "value": "30"\n        }\n      ]\n    }\n  ],\n  "steps": [\n    {\n      "stepOrder": 1,\n      "stepType": "SEND_MESSAGE",\n      "name": "Win-back Email",\n      "messageConfig": {\n        "messageType": "MARKETING_EMAIL",\n        "emailTemplateId": 7,\n        "sendingTime": "10:00"\n      }\n    },\n    {\n      "stepOrder": 2,\n      "stepType": "WAIT",\n      "name": "Wait 3 days",\n      "waitConfig": {\n        "waitDays": 3\n      }\n    },\n    {\n      "stepOrder": 3,\n      "stepType": "SMART_RULE",\n      "name": "Check engagement",\n      "smartRuleConfig": {\n        "name": "Opened email?",\n        "conditions": [\n          {\n            "conditionOrder": 0,\n            "conditionType": "field",\n            "fieldName": "emailOpened",\n            "operator": "EQUALS",\n            "value": "true"\n          }\n        ]\n      }\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Constraints"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"triggers"})," must contain ",(0,i.jsx)(n.strong,{children:"exactly 1"})," trigger (more = 400)."]}),"\n",(0,i.jsx)(n.li,{children:"At least 1 step required."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"campaignId"})," is optional \u2014 omit for template-based automations."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Response ",(0,i.jsx)(n.code,{children:"201"})]})," \u2014 raw automation record (not the logic/layout shape). Fetch ",(0,i.jsx)(n.code,{children:"GET /automations/:id"})," to get the full transformer output."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"list-automations",children:"List automations"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /automations\nGET /automations?campaignId=5\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Response ",(0,i.jsx)(n.code,{children:"200"})]})," \u2014 array of ",(0,i.jsx)(n.code,{children:"AutomationResponse"})," objects (full ",(0,i.jsx)(n.code,{children:"{ logic, layout }"})," contract for each)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "id": 45,\n    "name": "Win-back Campaign",\n    "description": null,\n    "category": "reengagement-campaigns",\n    "status": "DRAFT",\n    "logicVersion": "1.0.0",\n    "logic": {\n      "version": "1.0.0",\n      "trigger": {\n        "id": "22",\n        "type": "INACTIVITY",\n        "stepKey": "trigger",\n        "label": "30-day inactive",\n        "conditions": [...]\n      },\n      "steps": [\n        {\n          "id": "200",\n          "type": "SEND_MESSAGE",\n          "stepKey": "send-message",\n          "label": "Win-back Email",\n          "order": 1,\n          "config": { "messageType": "MARKETING_EMAIL", "emailTemplateId": 7, ... },\n          "nextStepIds": ["201"],\n          "completionStatus": "configured",\n          "isDefault": false,\n          "locked": false,\n          "required": false\n        }\n      ]\n    },\n    "layout": null,\n    "_count": { "executions": 0 },\n    "createdAt": "2026-02-25T10:00:00.000Z",\n    "updatedAt": "2026-02-25T10:00:00.000Z"\n  }\n]\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"get-single-automation",children:"Get single automation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /automations/:id\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Response ",(0,i.jsx)(n.code,{children:"200"})]})," \u2014 single ",(0,i.jsx)(n.code,{children:"AutomationResponse"})," (same shape as one item in the list)."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"update-automation",children:"Update automation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"PUT /automations/:id\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Replaces the automation's configuration. Accepts the same body as ",(0,i.jsx)(n.code,{children:"POST /automations"})," (all fields partial). When ",(0,i.jsx)(n.code,{children:"triggers"})," or ",(0,i.jsx)(n.code,{children:"steps"})," are included, the existing records are ",(0,i.jsx)(n.strong,{children:"deleted and recreated"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Response ",(0,i.jsx)(n.code,{children:"200"})]})," \u2014 raw updated automation record."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"delete-automation",children:"Delete automation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"DELETE /automations/:id\n"})}),"\n",(0,i.jsx)(n.p,{children:"Deletes the automation and stops all executions."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Response ",(0,i.jsx)(n.code,{children:"200"})]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{ "message": "Automation deleted successfully" }\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"update-status",children:"Update status"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"PATCH /automations/:id/status\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request body"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{ "status": "ACTIVE" }\n'})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Value"}),(0,i.jsx)(n.th,{children:"Effect"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"DRAFT"'})}),(0,i.jsx)(n.td,{children:"Moves back to draft"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"ACTIVE"'})}),(0,i.jsx)(n.td,{children:"Goes live \u2014 triggers will fire"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"PAUSED"'})}),(0,i.jsx)(n.td,{children:"Suspends without losing config"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"ARCHIVED"'})}),(0,i.jsx)(n.td,{children:"Permanently retired"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Response ",(0,i.jsx)(n.code,{children:"200"})]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": 45,\n  "status": "ACTIVE",\n  "updatedAt": "2026-02-25T12:00:00.000Z"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"save-canvas-layout",children:"Save canvas layout"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"PATCH /automations/:id/layout\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Persists visual canvas data. Call this ",(0,i.jsx)(n.strong,{children:"debounced"})," (e.g. 1 second after last user drag) to avoid excessive writes. The backend stores the JSON opaquely and returns it unchanged in all subsequent ",(0,i.jsx)(n.code,{children:"GET"})," responses."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request body"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "layout": {\n    "viewport": { "x": -120, "y": -80, "zoom": 0.85 },\n    "nodes": {\n      "200": { "x": 400, "y": 100 },\n      "201": { "x": 400, "y": 250 }\n    },\n    "groups": {},\n    "links": {}\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Response ",(0,i.jsx)(n.code,{children:"200"})]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": 45,\n  "layout": { ... },\n  "updatedAt": "2026-02-25T12:05:00.000Z"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"add-a-step",children:"Add a step"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"POST /automations/:id/steps\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request body"})," \u2014 same ",(0,i.jsx)(n.code,{children:"CreateStepDto"})," shape used in the automation create payload, but for a single step:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "stepOrder": 4,\n  "stepType": "SEND_MESSAGE",\n  "name": "Follow-up Email",\n  "messageConfig": {\n    "messageType": "MARKETING_EMAIL",\n    "emailTemplateId": 8\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," Steps with ",(0,i.jsx)(n.code,{children:"isTemplatePrefilled: true"})," cannot be inserted between other pre-filled steps. Appending after all pre-filled steps is always allowed."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"update-a-step",children:"Update a step"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"PUT /automations/:id/steps/:stepId\n"})}),"\n",(0,i.jsx)(n.p,{children:"Replaces the step's config. Same body shape as add-step."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"delete-a-step",children:"Delete a step"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"DELETE /automations/:id/steps/:stepId\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"execution-endpoints",children:"Execution endpoints"}),"\n",(0,i.jsx)(n.h4,{id:"list-executions-for-an-automation",children:"List executions for an automation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /automations/:id/executions?page=1&limit=20\n"})}),"\n",(0,i.jsx)(n.h4,{id:"get-execution-details",children:"Get execution details"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /automations/:id/executions/:executionId\n"})}),"\n",(0,i.jsx)(n.h4,{id:"trigger-manual-execution",children:"Trigger manual execution"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"POST /automations/:id/execute\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{ "contactId": 123 }\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"execution-routing",children:"Execution Routing"}),"\n",(0,i.jsx)(n.h3,{id:"linear-automations-slg-se-rn-non-template",children:"Linear automations (SLG, SE, RN, non-template)"}),"\n",(0,i.jsxs)(n.p,{children:["The execution engine advances from ",(0,i.jsx)(n.code,{children:"stepOrder N"})," \u2192 ",(0,i.jsx)(n.code,{children:"stepOrder N+1"})," sequentially. All ",(0,i.jsx)(n.code,{children:"SMART_RULE"})," steps evaluate their conditions but the result does not branch \u2014 execution always continues to the next step in order."]}),"\n",(0,i.jsx)(n.h3,{id:"reengagement-automations",children:"Reengagement automations"}),"\n",(0,i.jsxs)(n.p,{children:["Steps carry explicit ",(0,i.jsx)(n.code,{children:"nextStepId"})," edges. The engine follows:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"currentStep.nextStepId"})," \u2192 next step (or stops if null)"]}),"\n",(0,i.jsxs)(n.li,{children:["For ",(0,i.jsx)(n.code,{children:"SMART_RULE"})," steps: evaluates conditions \u2192 follows ",(0,i.jsx)(n.code,{children:"trueNextStepId"})," or ",(0,i.jsx)(n.code,{children:"falseNextStepId"})," from ",(0,i.jsx)(n.code,{children:"SmartRuleStepConfig"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"To configure branching in a reengagement automation:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Create step A and step B"}),"\n",(0,i.jsxs)(n.li,{children:["Set ",(0,i.jsx)(n.code,{children:"step_A.nextStepId = step_B.id"})," (via ",(0,i.jsx)(n.code,{children:"PUT /automations/:id/steps/:stepId"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["For Smart Rule branching, include ",(0,i.jsx)(n.code,{children:"trueNextStepId"})," and ",(0,i.jsx)(n.code,{children:"falseNextStepId"})," in the smart rule config"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"template-prefilled-steps",children:"Template-Prefilled Steps"}),"\n",(0,i.jsxs)(n.p,{children:["When an automation is created from a campaign template, its steps carry ",(0,i.jsx)(n.code,{children:"isTemplatePrefilled: true"}),". In the response contract this maps to:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "isDefault": true,\n  "locked": true,\n  "required": true\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"UI implications:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The step's position in the pre-filled block cannot be changed by the user"}),"\n",(0,i.jsx)(n.li,{children:"The step cannot be deleted"}),"\n",(0,i.jsxs)(n.li,{children:["The step's ",(0,i.jsx)(n.code,{children:"config"})," can still be edited (updating the step config within the automation does not affect the source template)"]}),"\n",(0,i.jsx)(n.li,{children:"Additional steps can be appended after all pre-filled steps"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"filter-options-automation-level",children:"Filter Options (Automation-level)"}),"\n",(0,i.jsxs)(n.p,{children:["These fields are set on the ",(0,i.jsx)(n.code,{children:"Automation"})," record and control which contacts enter the automation:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sourceFilterEnabled"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"Restrict to specific lead sources"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"allowedSources"})}),(0,i.jsx)(n.td,{children:"string[]"}),(0,i.jsx)(n.td,{children:"Allowed source identifiers"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inactivityFilterEnabled"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"Only run for contacts inactive for N units"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inactivityThreshold"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Threshold value"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inactivityUnit"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"InactivityUnit"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:'"MINUTES"'})," | ",(0,i.jsx)(n.code,{children:'"HOURS"'})," | ",(0,i.jsx)(n.code,{children:'"DAYS"'})," | ",(0,i.jsx)(n.code,{children:'"WEEKS"'})," | ",(0,i.jsx)(n.code,{children:'"MONTHS"'})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tagFilterEnabled"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"Restrict to contacts with specific tags"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"allowedTagIds"})}),(0,i.jsx)(n.td,{children:"number[]"}),(0,i.jsx)(n.td,{children:"Allowed tag IDs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"statusFilterEnabled"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"Restrict to contacts with specific statuses"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"allowedStatuses"})}),(0,i.jsx)(n.td,{children:"string[]"}),(0,i.jsxs)(n.td,{children:["Allowed ",(0,i.jsx)(n.code,{children:"CustomerStatusType"})," values"]})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"common-response-shapes",children:"Common Response Shapes"}),"\n",(0,i.jsx)(n.h3,{id:"triggercondition",children:(0,i.jsx)(n.code,{children:"TriggerCondition"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'interface TriggerCondition {\n  id: number;\n  conditionOrder: number;\n  logicOperator: "AND" | "OR" | null;\n  fieldName: string | null;\n  operator: ConditionOperator;\n  value: string | null;\n  targetCampaignId: number | null;\n  targetTagGroupId: number | null;\n  targetFaqGroupId: number | null;\n  // Resolved names (if available)\n  targetCampaign?: { name: string } | null;\n  targetTagGroup?: { id: number; tagId: number } | null;\n  targetFaqGroup?: { id: number; questionId: number } | null;\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Status"}),(0,i.jsx)(n.th,{children:"Scenario"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"400"})}),(0,i.jsx)(n.td,{children:"Missing required field, invalid step config, or more than 1 trigger provided"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"404"})}),(0,i.jsx)(n.td,{children:"Automation not found or belongs to another user"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"400"})}),(0,i.jsx)(n.td,{children:"Attempting to insert step between pre-filled steps (when applicable)"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"typescript-reference",children:"TypeScript Reference"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'type AutomationStatus = "DRAFT" | "ACTIVE" | "PAUSED" | "ARCHIVED";\n\ntype CategorySlug =\n  | "sales-and-lead-generation"\n  | "support-escalation"\n  | "retention-nurture"\n  | "reengagement-campaigns";\n\ntype CompletionStatus = "pending" | "configured";\n\ninterface TriggerNode {\n  id: string;\n  type: string;            // AutomationTriggerType enum value\n  stepKey: "trigger";\n  label: string;\n  conditions: TriggerCondition[];\n}\n\ninterface LogicStep {\n  id: string;\n  type: string;            // AutomationStepType enum value\n  stepKey: string;         // kebab-case routing key\n  label: string;\n  order: number;\n  config: Record<string, any>;\n  nextStepIds: string[];\n  completionStatus: CompletionStatus;\n  isDefault: boolean;\n  locked: boolean;\n  required: boolean;\n}\n\ninterface AutomationLogic {\n  version: string;\n  trigger: TriggerNode | null;\n  steps: LogicStep[];\n}\n\ninterface AutomationResponse {\n  id: number;\n  name: string;\n  description: string | null;\n  category: CategorySlug | null;\n  status: AutomationStatus;\n  logicVersion: string;\n  logic: AutomationLogic;\n  layout: Record<string, any> | null;\n  _count?: { executions: number };\n  createdAt: string;\n  updatedAt: string;\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"quick-start-examples",children:"Quick-start Examples"}),"\n",(0,i.jsx)(n.h3,{id:"creating-and-activating-a-simple-email-automation",children:"Creating and activating a simple email automation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// 1. Create\nconst automation = await fetch('/automations', {\n  method: 'POST',\n  body: JSON.stringify({\n    name: 'Welcome Email',\n    startType: 'TRIGGER_BASED',\n    triggers: [{\n      triggerType: 'CONTACT_SUBSCRIBED',\n      name: 'On subscribe',\n      conditions: []\n    }],\n    steps: [{\n      stepOrder: 1,\n      stepType: 'SEND_MESSAGE',\n      name: 'Welcome Email',\n      messageConfig: {\n        messageType: 'MARKETING_EMAIL',\n        emailTemplateId: 3\n      }\n    }]\n  })\n});\n\n// 2. Activate\nawait fetch(`/automations/${automation.id}/status`, {\n  method: 'PATCH',\n  body: JSON.stringify({ status: 'ACTIVE' })\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-template-based-automation",children:"Creating a template-based automation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// 1. Create SLG template\nconst template = await fetch('/campaign-templates', {\n  method: 'POST',\n  body: JSON.stringify({ name: 'My SLG', category: 'SALES_LEAD_GENERATION' })\n});\n\n// 2. Configure step 0 (webchat install)\nawait fetch(`/campaign-templates/${template.id}/steps/0`, {\n  method: 'PATCH',\n  body: JSON.stringify({\n    stepType: 'SLG_WEBCHAT_INSTALL',\n    config: { websiteUrl: 'https://example.com', installVerified: false }\n  })\n});\n\n// 3. Spawn automation\nconst automation = await fetch(`/campaign-templates/${template.id}/automation`, {\n  method: 'POST',\n  body: JSON.stringify({ name: 'My SLG Automation' })\n});\n\n// 4. Fetch with { logic, layout } contract\nconst full = await fetch(`/automations/${automation.id}`);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"saving-canvas-layout-debounced",children:"Saving canvas layout (debounced)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"let saveTimer: ReturnType<typeof setTimeout>;\n\nfunction onCanvasDrag(automationId: number, layout: CanvasLayout) {\n  clearTimeout(saveTimer);\n  saveTimer = setTimeout(() => {\n    fetch(`/automations/${automationId}/layout`, {\n      method: 'PATCH',\n      body: JSON.stringify({ layout })\n    });\n  }, 1000);\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);