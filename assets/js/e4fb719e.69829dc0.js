"use strict";(globalThis.webpackChunkbackend_docs=globalThis.webpackChunkbackend_docs||[]).push([[7430],{5312:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"channels-integration/email-channels-integration-web","title":"Email channels integration guide for web","description":"Gmail Integration","source":"@site/docs/channels-integration/email-channels-integration-web.md","sourceDirName":"channels-integration","slug":"/channels-integration/email-channels-integration-web","permalink":"/backend-docs/docs/channels-integration/email-channels-integration-web","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/channels-integration/email-channels-integration-web.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Custom Email (AWS SES) Integration Guide","permalink":"/backend-docs/docs/channels-integration/custom-email-integration"},"next":{"title":"Calendar Channels Integration Guide for Web","permalink":"/backend-docs/docs/channels-integration/calendar-channels-integration-guide-web"}}');var s=t(4848),c=t(8453);const r={sidebar_position:3},o="Email channels integration guide for web",d={},l=[{value:"Gmail Integration",id:"gmail-integration",level:2},{value:"Flow",id:"flow",level:3},{value:"Disconnect",id:"disconnect",level:3},{value:"Endpoints",id:"endpoints",level:3},{value:"Outlook Integration",id:"outlook-integration",level:2},{value:"Flow",id:"flow-1",level:3},{value:"Disconnect",id:"disconnect-1",level:3},{value:"Endpoints",id:"endpoints-1",level:3}];function a(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"email-channels-integration-guide-for-web",children:"Email channels integration guide for web"})}),"\n",(0,s.jsx)(e.h2,{id:"gmail-integration",children:"Gmail Integration"}),"\n",(0,s.jsx)(e.h3,{id:"flow",children:"Flow"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"1. Initiate"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"const handleGmailAuth = () => {\n  window.location.href = `${API_BASE}/email/google/auth`;\n};\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"2. Handle Redirect"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'useEffect(() => {\n  const params = new URLSearchParams(window.location.search);\n\n  if (\n    params.get("email_connected") === "true" &&\n    params.get("provider") === "gmail"\n  ) {\n    setStatus("\u2705 Gmail connected");\n    loadConnectedAccounts();\n    window.history.replaceState({}, "", window.location.pathname);\n  }\n\n  if (params.get("error")) {\n    setError(decodeURIComponent(params.get("error")));\n    window.history.replaceState({}, "", window.location.pathname);\n  }\n}, []);\n'})}),"\n",(0,s.jsxs)(e.p,{children:["Backend handles OAuth callback and redirects with ",(0,s.jsx)(e.code,{children:"?email_connected=true&provider=gmail"})," or ",(0,s.jsx)(e.code,{children:"?error=..."}),"."]}),"\n",(0,s.jsx)(e.h3,{id:"disconnect",children:"Disconnect"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'await fetch(`${API_BASE}/email/disconnect/gmail`, {\n  method: "POST",\n  credentials: "include",\n  headers: { "Content-Type": "application/json" },\n  body: JSON.stringify({ accountId }),\n});\n'})}),"\n",(0,s.jsx)(e.h3,{id:"endpoints",children:"Endpoints"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Endpoint"}),(0,s.jsx)(e.th,{children:"Method"}),(0,s.jsx)(e.th,{children:"Auth"}),(0,s.jsx)(e.th,{children:"Purpose"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"/channels/email/google/auth"})}),(0,s.jsx)(e.td,{children:"GET"}),(0,s.jsx)(e.td,{children:"Session"}),(0,s.jsx)(e.td,{children:"Initiate OAuth"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"/channels/email/google/callback"})}),(0,s.jsx)(e.td,{children:"GET"}),(0,s.jsx)(e.td,{children:"No"}),(0,s.jsx)(e.td,{children:"Backend callback"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"/channels/email/disconnect/gmail"})}),(0,s.jsx)(e.td,{children:"POST"}),(0,s.jsx)(e.td,{children:"Session"}),(0,s.jsx)(e.td,{children:"Remove connection"})]})]})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"outlook-integration",children:"Outlook Integration"}),"\n",(0,s.jsx)(e.h3,{id:"flow-1",children:"Flow"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"1. Initiate"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"const handleOutlookAuth = () => {\n  window.location.href = `${API_BASE}/email/microsoft/auth`;\n};\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"2. Handle Redirect"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'useEffect(() => {\n  const params = new URLSearchParams(window.location.search);\n\n  if (\n    params.get("email_connected") === "true" &&\n    params.get("provider") === "outlook"\n  ) {\n    setStatus("\u2705 Outlook connected");\n    loadConnectedAccounts();\n    window.history.replaceState({}, "", window.location.pathname);\n  }\n\n  if (params.get("error")) {\n    setError(decodeURIComponent(params.get("error")));\n    window.history.replaceState({}, "", window.location.pathname);\n  }\n}, []);\n'})}),"\n",(0,s.jsx)(e.h3,{id:"disconnect-1",children:"Disconnect"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'await fetch(`${API_BASE}/email/disconnect/outlook`, {\n  method: "POST",\n  credentials: "include",\n  headers: { "Content-Type": "application/json" },\n  body: JSON.stringify({ accountId }),\n});\n'})}),"\n",(0,s.jsx)(e.h3,{id:"endpoints-1",children:"Endpoints"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Endpoint"}),(0,s.jsx)(e.th,{children:"Method"}),(0,s.jsx)(e.th,{children:"Auth"}),(0,s.jsx)(e.th,{children:"Purpose"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"/channels/email/microsoft/auth"})}),(0,s.jsx)(e.td,{children:"GET"}),(0,s.jsx)(e.td,{children:"Session"}),(0,s.jsx)(e.td,{children:"Initiate OAuth"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"/channels/email/microsoft/callback"})}),(0,s.jsx)(e.td,{children:"GET"}),(0,s.jsx)(e.td,{children:"No"}),(0,s.jsx)(e.td,{children:"Backend callback"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"/channels/email/disconnect/outlook"})}),(0,s.jsx)(e.td,{children:"POST"}),(0,s.jsx)(e.td,{children:"Session"}),(0,s.jsx)(e.td,{children:"Remove connection"})]})]})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Key Points:"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Backend manages entire OAuth flow"}),"\n",(0,s.jsx)(e.li,{children:"Frontend only initiates and handles redirects"}),"\n",(0,s.jsxs)(e.li,{children:["Success: ",(0,s.jsx)(e.code,{children:"?email_connected=true&provider=..."})]}),"\n",(0,s.jsxs)(e.li,{children:["Error: ",(0,s.jsx)(e.code,{children:"?error=..."})]}),"\n",(0,s.jsxs)(e.li,{children:["All require session authentication (",(0,s.jsx)(e.code,{children:'credentials: "include"'}),")"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>o});var i=t(6540);const s={},c=i.createContext(s);function r(n){const e=i.useContext(c);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),i.createElement(c.Provider,{value:e},n.children)}}}]);