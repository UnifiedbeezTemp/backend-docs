"use strict";(globalThis.webpackChunkbackend_docs=globalThis.webpackChunkbackend_docs||[]).push([[1822],{2659:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"copilot-postman-testing","title":"Copilot Business Identity Step Testing Guide","description":"Prerequisites","source":"@site/docs/copilot-postman-testing.md","sourceDirName":".","slug":"/copilot-postman-testing","permalink":"/backend-docs/docs/copilot-postman-testing","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/copilot-postman-testing.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12},"sidebar":"tutorialSidebar","previous":{"title":"Channel AI Recommendations API Documentation","permalink":"/backend-docs/docs/smart-suggestion-beebot"}}');var i=s(4848),l=s(8453);const r={sidebar_position:12},c="Copilot Business Identity Step Testing Guide",o={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Test Flow Structure",id:"test-flow-structure",level:2},{value:"1. Start Conversation",id:"1-start-conversation",level:3},{value:"2. Plan Confirmation - Proceed Path",id:"2-plan-confirmation---proceed-path",level:3},{value:"3. Plan Change Path (Alternative)",id:"3-plan-change-path-alternative",level:3},{value:"4. Business Industry Selection",id:"4-business-industry-selection",level:3},{value:"5. Category Not Listed Flow",id:"5-category-not-listed-flow",level:3},{value:"6. Business Name Entry",id:"6-business-name-entry",level:3},{value:"7. Business Match Selection",id:"7-business-match-selection",level:3},{value:"8. Business Not Listed - Logo Upload",id:"8-business-not-listed---logo-upload",level:3},{value:"Edit Flow Tests",id:"edit-flow-tests",level:2},{value:"9. Edit Business Industry",id:"9-edit-business-industry",level:3},{value:"10. Skip Flow Tests",id:"10-skip-flow-tests",level:3},{value:"State Management Tests",id:"state-management-tests",level:2},{value:"11. Get Current State",id:"11-get-current-state",level:3},{value:"12. Restart Conversation",id:"12-restart-conversation",level:3},{value:"Validation Tests",id:"validation-tests",level:2},{value:"13. Invalid Input Handling",id:"13-invalid-input-handling",level:3},{value:"Test Execution Order",id:"test-execution-order",level:2},{value:"Prerequisites",id:"prerequisites-1",level:2},{value:"Test 1: Team Size Selection - &quot;Just Me&quot;",id:"test-1-team-size-selection---just-me",level:2},{value:"Test 2: Team Size Selection - &quot;2-5&quot;",id:"test-2-team-size-selection---2-5",level:2},{value:"Test 3: Invite Team - &quot;Invite Now&quot; (Exit Option)",id:"test-3-invite-team---invite-now-exit-option",level:2},{value:"Test 4: Invite Team - &quot;Invite Later&quot;",id:"test-4-invite-team---invite-later",level:2},{value:"Test 5: Complete Section from inviteTeamLater",id:"test-5-complete-section-from-inviteteamlater",level:2},{value:"Test 6: Plan Validation - Exceeds Limit",id:"test-6-plan-validation---exceeds-limit",level:2},{value:"Verification Checklist",id:"verification-checklist",level:2},{value:"Prerequisites",id:"prerequisites-2",level:2},{value:"Step 1: Start/Resume Conversation",id:"step-1-startresume-conversation",level:2},{value:"Step 2: Select Channels",id:"step-2-select-channels",level:2},{value:"Step 3: Choose Settings Strategy",id:"step-3-choose-settings-strategy",level:2},{value:"Step 4: Select Fallback Behavior",id:"step-4-select-fallback-behavior",level:2},{value:"Step 5: Confirm Fallback Config",id:"step-5-confirm-fallback-config",level:2},{value:"Step 6: Choose Assistant Strategy",id:"step-6-choose-assistant-strategy",level:2},{value:"Step 7: Confirm Assistant Creation",id:"step-7-confirm-assistant-creation",level:2},{value:"Verification Queries",id:"verification-queries",level:2},{value:"Prerequisites",id:"prerequisites-3",level:2},{value:"Step 1: Verify Current State",id:"step-1-verify-current-state",level:2},{value:"Step 2: Select Automations",id:"step-2-select-automations",level:2},{value:"Step 3: Confirm Automations",id:"step-3-confirm-automations",level:2},{value:"Verification Queries",id:"verification-queries-1",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"copilot-business-identity-step-testing-guide",children:"Copilot Business Identity Step Testing Guide"})}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Base URL: ",(0,i.jsx)(n.code,{children:"{your-api-url}"})]}),"\n",(0,i.jsx)(n.li,{children:"Auth token from login"}),"\n",(0,i.jsx)(n.li,{children:"User ID from session"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"test-flow-structure",children:"Test Flow Structure"}),"\n",(0,i.jsx)(n.h3,{id:"1-start-conversation",children:"1. Start Conversation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"POST /copilot/start\nAuthorization: Bearer {token}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Current substep: ",(0,i.jsx)(n.code,{children:"planConfirmation"})]}),"\n",(0,i.jsx)(n.li,{children:"Bot message with plan summary component"}),"\n",(0,i.jsx)(n.li,{children:"2 options: Proceed or Change plan"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"2-plan-confirmation---proceed-path",children:"2. Plan Confirmation - Proceed Path"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2a. Confirm Plan (Yes)"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\nContent-Type: application/json\n\n{\n  "inputType": "selection",\n  "content": "Yes, Proceed with my current plan",\n  "metadata": {\n    "selectedOption": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Current substep: ",(0,i.jsx)(n.code,{children:"businessIndustry"})]}),"\n",(0,i.jsx)(n.li,{children:'Industry selection grid (11 options + "not listed")'}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"3-plan-change-path-alternative",children:"3. Plan Change Path (Alternative)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3a. Request Plan Change"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\n\n{\n  "inputType": "selection",\n  "content": "No, Change plan",\n  "metadata": {\n    "selectedOption": false\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Current substep: ",(0,i.jsx)(n.code,{children:"changePlan"})]}),"\n",(0,i.jsx)(n.li,{children:"Plans preview component"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3b. Execute Plan Change"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/change-plan\n\n{\n  "newPlan": "BUSINESS"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Returns to appropriate substep with updated plan context"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"4-business-industry-selection",children:"4. Business Industry Selection"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"4a. Select Listed Industry"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\n\n{\n  "inputType": "selection",\n  "content": "E-commerce / Retail",\n  "metadata": {\n    "selectedOption": "ECOMMERCE_RETAIL"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Current substep: ",(0,i.jsx)(n.code,{children:"businessName"})]}),"\n",(0,i.jsx)(n.li,{children:"Prompt for business name input"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:'4b. Select "Not Listed"'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\n\n{\n  "inputType": "selection",\n  "content": "Category not listed here",\n  "metadata": {\n    "selectedOption": "none"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Current substep: ",(0,i.jsx)(n.code,{children:"categoryNotListed"})]}),"\n",(0,i.jsx)(n.li,{children:"Text input prompt"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"5-category-not-listed-flow",children:"5. Category Not Listed Flow"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"5a. Enter Custom Industry"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\n\n{\n  "inputType": "text",\n  "content": "Pet grooming services",\n  "metadata": {\n    "formField": "industry"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"AI suggests industry category"}),"\n",(0,i.jsxs)(n.li,{children:["Advances to ",(0,i.jsx)(n.code,{children:"businessName"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"6-business-name-entry",children:"6. Business Name Entry"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"6a. Enter Business Name"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\n\n{\n  "inputType": "text",\n  "content": "Pawfect Grooming",\n  "metadata": {\n    "formField": "businessName"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Current substep: ",(0,i.jsx)(n.code,{children:"selectBusinessNameMatch"})]}),"\n",(0,i.jsx)(n.li,{children:'List of matching businesses + "not listed" option'}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"7-business-match-selection",children:"7. Business Match Selection"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"7a. Select Matched Business"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\n\n{\n  "inputType": "selection",\n  "content": "Private Dog Grooming in Bellevue \u2014 Serving Seattle Area | Pawfect Grooming",\n  "metadata": {\n    "selectedOption": {\n      "name": "Private Dog Grooming in Bellevue \u2014 Serving Seattle Area | Pawfect Grooming",\n      "website": "https://pawfectgrooming.org/",\n      "phone": "(425) 502-5135",\n      "logo_url": "https://pawfectgrooming.org/images/pawfect.png",\n      "source": "google_search",\n      "confidence": 0.8\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Current substep: ",(0,i.jsx)(n.code,{children:"confirmBusinessData"})]}),"\n",(0,i.jsx)(n.li,{children:"Business details + AI-generated goals"}),"\n",(0,i.jsxs)(n.li,{children:["Section complete flag: ",(0,i.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Continue to next step (team member)"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "inputType": "selection",\n  "content": "Continue",\n  "metadata": {\n    "selectedOption": "continue"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:'7b. Select "Not Listed"'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\n\n{\n  "inputType": "selection",\n  "content": "My business isn\'t listed",\n  "metadata": {\n    "selectedOption": ""\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Current substep: ",(0,i.jsx)(n.code,{children:"businessNotListed"})]}),"\n",(0,i.jsx)(n.li,{children:"Logo upload component"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"8-business-not-listed---logo-upload",children:"8. Business Not Listed - Logo Upload"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"8a. Upload Logo"})," (Custom handling required)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\n\n{\n  "inputType": "custom",\n  "content": "logo_uploaded",\n  "metadata": {\n    "logoUrl": "s3://bucket/user-123/logo.png"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Section complete"}),"\n",(0,i.jsxs)(n.li,{children:["Advances to next section: ",(0,i.jsx)(n.code,{children:"teamMembers"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"edit-flow-tests",children:"Edit Flow Tests"}),"\n",(0,i.jsx)(n.h3,{id:"9-edit-business-industry",children:"9. Edit Business Industry"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"9a. Request Edit"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/edit/businessIndustry\n\n{\n  "newValue": "HEALTHCARE_CLINICS"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Updated ",(0,i.jsx)(n.code,{children:"collected_data.industry"})]}),"\n",(0,i.jsx)(n.li,{children:"If dependent steps exist, returns first affected step"}),"\n",(0,i.jsx)(n.li,{children:"Otherwise, returns current position"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"10-skip-flow-tests",children:"10. Skip Flow Tests"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"10a. Skip Business Industry"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/skip\n\n{\n  "substepId": "businessIndustry"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Substep marked as skipped"}),"\n",(0,i.jsx)(n.li,{children:"System event recorded"}),"\n",(0,i.jsx)(n.li,{children:"Advances to next available substep"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"state-management-tests",children:"State Management Tests"}),"\n",(0,i.jsx)(n.h3,{id:"11-get-current-state",children:"11. Get Current State"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /copilot/state\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "conversationId": 123,\n  "currentSection": "businessIdentity",\n  "currentSubstep": "planConfirmation",\n  "sessionState": {\n    "current_section": "businessIdentity",\n    "current_substep": "planConfirmation",\n    "completed_substeps": [],\n    "completed_sections": [],\n    "skipped_substeps": [],\n    "collected_data": {},\n    "edit_history": []\n  },\n  "recentMessages": [...],\n  "currentSubstepDetails": {...}\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"12-restart-conversation",children:"12. Restart Conversation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"POST /copilot/restart\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"New conversation created"}),"\n",(0,i.jsx)(n.li,{children:"Previous marked inactive"}),"\n",(0,i.jsxs)(n.li,{children:["Returns to ",(0,i.jsx)(n.code,{children:"planConfirmation"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"validation-tests",children:"Validation Tests"}),"\n",(0,i.jsx)(n.h3,{id:"13-invalid-input-handling",children:"13. Invalid Input Handling"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"13a. Wrong Input Type"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\n\n{\n  "inputType": "text",\n  "content": "some text",\n  "metadata": {}\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"On a choice substep - should return error"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"13b. Missing Required Selection"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /copilot/message\n\n{\n  "inputType": "selection",\n  "content": "",\n  "metadata": {}\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expected Response:"}),' 400 error - "Selection required"']}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"test-execution-order",children:"Test Execution Order"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Start \u2192 Plan Confirmation \u2192 Yes \u2192 Industry \u2192 Name \u2192 Match \u2192 Confirm \u2705"}),"\n",(0,i.jsx)(n.li,{children:"Start \u2192 Plan Change \u2192 Select New Plan \u2192 Industry \u2192 ... \u2705"}),"\n",(0,i.jsx)(n.li,{children:"Start \u2192 Industry \u2192 Not Listed \u2192 Custom \u2192 Name \u2192 ... \u2705"}),"\n",(0,i.jsx)(n.li,{children:"Mid-flow: Edit Industry \u2192 Verify state update \u2705"}),"\n",(0,i.jsx)(n.li,{children:"Mid-flow: Skip substep \u2192 Verify skip logic \u2705"}),"\n",(0,i.jsx)(n.li,{children:"Restart conversation \u2192 Verify reset \u2705"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Each path should validate:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Correct substep transitions"}),"\n",(0,i.jsxs)(n.li,{children:["Proper data persistence in ",(0,i.jsx)(n.code,{children:"collected_data"})]}),"\n",(0,i.jsx)(n.li,{children:"Message history recording"}),"\n",(0,i.jsx)(n.li,{children:"UI directive components"}),"\n",(0,i.jsx)(n.li,{children:"Error handling"}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"team-members-section---postman-test-flow",children:"Team Members Section - Postman Test Flow"}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites-1",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.p,{children:["Complete ",(0,i.jsx)(n.code,{children:"businessIdentity"})," section and be at ",(0,i.jsx)(n.code,{children:"teamSize"})," substep."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"test-1-team-size-selection---just-me",children:'Test 1: Team Size Selection - "Just Me"'}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"/api/v1/copilot/message"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "inputType": "selection",\n  "content": "Just Me",\n  "metadata": {\n    "selectedOption": "1"\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expected:"})," Advance to ",(0,i.jsx)(n.code,{children:"inviteTeamLater"})," substep"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"test-2-team-size-selection---2-5",children:'Test 2: Team Size Selection - "2-5"'}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"/api/v1/copilot/message"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "inputType": "selection",\n  "content": "2-5",\n  "metadata": {\n    "selectedOption": "2-5"\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expected:"})," Advance to ",(0,i.jsx)(n.code,{children:"inviteTeam"})," substep"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"test-3-invite-team---invite-now-exit-option",children:'Test 3: Invite Team - "Invite Now" (Exit Option)'}),"\n",(0,i.jsxs)(n.p,{children:["At ",(0,i.jsx)(n.code,{children:"inviteTeam"})," substep:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "inputType": "selection",\n  "content": "Invite Now",\n  "metadata": {\n    "selectedOption": "inviteNow"\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expected:"})," Handle ",(0,i.jsx)(n.code,{children:"isExitOption: true"})," - should trigger special flow or stay on current substep"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"test-4-invite-team---invite-later",children:'Test 4: Invite Team - "Invite Later"'}),"\n",(0,i.jsxs)(n.p,{children:["At ",(0,i.jsx)(n.code,{children:"inviteTeam"})," substep:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "inputType": "selection",\n  "content": "Invite Later",\n  "metadata": {\n    "selectedOption": "inviteLater"\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expected:"})," Advance to ",(0,i.jsx)(n.code,{children:"inviteTeamLater"})," (end of section)"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"test-5-complete-section-from-inviteteamlater",children:"Test 5: Complete Section from inviteTeamLater"}),"\n",(0,i.jsxs)(n.p,{children:["At ",(0,i.jsx)(n.code,{children:"inviteTeamLater"})," (has ",(0,i.jsx)(n.code,{children:"isEndOfStep: true"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "inputType": "selection",\n  "content": "Continue",\n  "metadata": {\n    "selectedOption": "continue"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Mark ",(0,i.jsx)(n.code,{children:"teamMembers"})," section complete"]}),"\n",(0,i.jsxs)(n.li,{children:["Advance to ",(0,i.jsx)(n.code,{children:"channels"})," section with entry substep"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"test-6-plan-validation---exceeds-limit",children:"Test 6: Plan Validation - Exceeds Limit"}),"\n",(0,i.jsx)(n.p,{children:"Restart and select team size exceeding plan limit:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "inputType": "selection",\n  "content": "21 or more",\n  "metadata": {\n    "selectedOption": "21"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"showPlanUpgrade: true"})," in ",(0,i.jsx)(n.code,{children:"uiDirectives"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"suggestedPlan"})," returned"]}),"\n",(0,i.jsxs)(n.li,{children:["Stay on ",(0,i.jsx)(n.code,{children:"teamSize"})," substep"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"verification-checklist",children:"Verification Checklist"}),"\n",(0,i.jsxs)(n.p,{children:["After each test, call ",(0,i.jsx)(n.strong,{children:"GET"})," ",(0,i.jsx)(n.code,{children:"/api/v1/copilot/state"})," and verify:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"completed_substeps"})," includes previous substeps"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"current_substep"})," matches expected"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"current_section"})," is ",(0,i.jsx)(n.code,{children:'"teamMembers"'})," (or ",(0,i.jsx)(n.code,{children:'"channels"'})," if section complete)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"collected_data.team_size"})," stored correctly"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"botMessage"})," properly interpolated"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"completed_sections"})," includes ",(0,i.jsx)(n.code,{children:'"teamMembers"'})," after final step"]}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"testing-channels--ai-assistant-flow",children:"Testing Channels \u2192 AI Assistant Flow"}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites-2",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Active user session with valid JWT token"}),"\n",(0,i.jsx)(n.li,{children:"User has selected a plan during onboarding"}),"\n",(0,i.jsx)(n.li,{children:"User has completed businessIdentity section"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-1-startresume-conversation",children:"Step 1: Start/Resume Conversation"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GET"})," ",(0,i.jsx)(n.code,{children:"/copilot/state"})]}),"\n",(0,i.jsx)(n.p,{children:"Headers:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Authorization: Bearer {your_jwt_token}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "currentSection": "channels",\n  "currentSubstep": "channels",\n  "sessionState": {\n    "collected_data": {\n      "industry": "ECOMMERCE_RETAIL",\n      "selected_plan": "BUSINESS"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-2-select-channels",children:"Step 2: Select Channels"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"/copilot/message"})]}),"\n",(0,i.jsx)(n.p,{children:"Body:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "content": "WhatsApp Business, Email, SMS",\n  "inputType": "choice",\n  "metadata": {\n    "substepId": "channels",\n    "selectedOptions": ["whatsapp", "gmail", "twilio_sms"]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "currentSubstep": {\n    "id": "confirmChannelsConfiguration",\n    "botMessage": "Great! I\'ve noted these channels: WhatsApp Business, Gmail, Twilio SMS..."\n  },\n  "lastUserMessage": {\n    "content": "WhatsApp Business, Gmail, Twilio SMS"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-3-choose-settings-strategy",children:"Step 3: Choose Settings Strategy"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"/copilot/message"})]}),"\n",(0,i.jsx)(n.p,{children:"Body (for recommended):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "content": "Use recommended settings",\n  "inputType": "choice",\n  "metadata": {\n    "substepId": "confirmChannelsConfiguration",\n    "selectedOption": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Or (for manual):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "content": "Configure now",\n  "inputType": "choice",\n  "metadata": {\n    "substepId": "confirmChannelsConfiguration",\n    "selectedOption": false\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "currentSubstep": {\n    "id": "noReplyConfiguration",\n    "parentStepId": "fallbackLogic"\n  },\n  "sectionComplete": true\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-4-select-fallback-behavior",children:"Step 4: Select Fallback Behavior"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"/copilot/message"})]}),"\n",(0,i.jsx)(n.p,{children:"Body:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "content": "Escalate to someone else",\n  "inputType": "choice",\n  "metadata": {\n    "substepId": "noReplyConfiguration",\n    "selectedOption": "escalate"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "currentSubstep": {\n    "id": "confirmNoReplyConfiguration",\n    "botMessage": "Okay, I\'ll escalate if no one replies."\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-5-confirm-fallback-config",children:"Step 5: Confirm Fallback Config"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"/copilot/message"})]}),"\n",(0,i.jsx)(n.p,{children:"Body:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "content": "Continue to next step",\n  "inputType": "choice",\n  "metadata": {\n    "substepId": "confirmNoReplyConfiguration",\n    "selectedOption": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "currentSubstep": {\n    "id": "aiAssistantsForChannels",\n    "parentStepId": "aiAssistant"\n  },\n  "sectionComplete": true\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-6-choose-assistant-strategy",children:"Step 6: Choose Assistant Strategy"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"/copilot/message"})]}),"\n",(0,i.jsx)(n.p,{children:"Body (for multiple):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "content": "Multiple Assistants by Channel",\n  "inputType": "choice",\n  "metadata": {\n    "substepId": "aiAssistantsForChannels",\n    "selectedOption": "multiple"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "currentSubstep": {\n    "id": "beezaroAssistants",\n    "botMessage": "...we have selected 3 Beezaro assistants..."\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-7-confirm-assistant-creation",children:"Step 7: Confirm Assistant Creation"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"/copilot/message"})]}),"\n",(0,i.jsx)(n.p,{children:"Body:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "content": "Confirm",\n  "inputType": "button",\n  "metadata": {\n    "substepId": "beezaroAssistants"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "currentSubstep": {\n    "id": "addAutomations",\n    "parentStepId": "automation"\n  },\n  "sectionComplete": true\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"verification-queries",children:"Verification Queries"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check created assistants:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM ai_assistants WHERE user_id = {userId};\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check channel configs:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT cac.*, cc.channel_name, aa.name as assistant_name\nFROM channel_ai_configs cac\nJOIN connected_channels cc ON cc.id = cac.connected_channel_id\nJOIN ai_assistants aa ON aa.id = cac.ai_assistant_id\nWHERE cc.user_id = {userId};\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check recommendations applied:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM escalation_keywords WHERE channel_ai_config_id IN (\n  SELECT id FROM channel_ai_configs WHERE is_recommendation = true\n);\n"})}),"\n",(0,i.jsx)(n.h1,{id:"testing-automation-step-in-postman",children:"Testing Automation Step in Postman"}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites-3",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Completed AI Assistant step"}),"\n",(0,i.jsx)(n.li,{children:"Active conversation with JWT token"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-1-verify-current-state",children:"Step 1: Verify Current State"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GET"})," ",(0,i.jsx)(n.code,{children:"/copilot/state"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "currentSection": "automation",\n  "currentSubstep": "addAutomations"\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-2-select-automations",children:"Step 2: Select Automations"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"/copilot/message"})]}),"\n",(0,i.jsx)(n.p,{children:"Body:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "content": "Yes, add automation",\n  "inputType": "choice",\n  "metadata": {\n    "substepId": "addAutomations",\n    "selectedOption": true,\n    "subSelectValues": [\n      "Tag new leads",\n      "Auto-respond after hours",\n      "Follow-up after 24h"\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "currentSubstep": {\n    "id": "confirmAIAutomations",\n    "botMessage": "Great, I\'ll add these automations: Tag new leads, Auto-respond after hours, Follow-up after 24h"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-3-confirm-automations",children:"Step 3: Confirm Automations"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"/copilot/message"})]}),"\n",(0,i.jsx)(n.p,{children:"Body:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "content": "Confirm and continue",\n  "inputType": "choice",\n  "metadata": {\n    "substepId": "confirmAIAutomations",\n    "selectedOption": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "currentSubstep": null,\n  "conversationComplete": true\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"verification-queries-1",children:"Verification Queries"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check created campaign:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM unified_campaigns\nWHERE user_id = {userId}\nAND name = 'Copilot Onboarding Automations';\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check automations:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT a.*, c.name as campaign_name\nFROM automations a\nJOIN unified_campaigns c ON c.id = a.campaign_id\nWHERE c.user_id = {userId};\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check automation steps:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM automation_steps\nWHERE automation_id IN (\n  SELECT id FROM automations WHERE user_id = {userId}\n)\nORDER BY automation_id, step_order;\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var t=s(6540);const i={},l=t.createContext(i);function r(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);