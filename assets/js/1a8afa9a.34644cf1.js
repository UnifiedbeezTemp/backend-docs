"use strict";(globalThis.webpackChunkbackend_docs=globalThis.webpackChunkbackend_docs||[]).push([[9389],{2039:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>o,frontMatter:()=>a,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"channels-integration/channel-icon-cross-reference","title":"Channel Icon Cross-Reference: API Documentation","description":"Overview","source":"@site/docs/channels-integration/channel-icon-cross-reference.md","sourceDirName":"channels-integration","slug":"/channels-integration/channel-icon-cross-reference","permalink":"/backend-docs/docs/channels-integration/channel-icon-cross-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/channels-integration/channel-icon-cross-reference.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Facebook Messenger & Instagram Integration Guide for Web","permalink":"/backend-docs/docs/channels-integration/messenger-and-instagram-integration-guide-web"},"next":{"title":"Get All Channels with Access Metadata - API Documentation","permalink":"/backend-docs/docs/channels-integration/get-all-channels-with-access"}}');var s=c(4848),d=c(8453);const a={},r="Channel Icon Cross-Reference: API Documentation",i={},t=[{value:"Overview",id:"overview",level:2},{value:"Endpoint 1: <code>GET /channels/available/all</code>",id:"endpoint-1-get-channelsavailableall",level:2},{value:"Relevant Response Structure",id:"relevant-response-structure",level:3},{value:"Key Fields",id:"key-fields",level:3},{value:"Endpoint 2: <code>GET /plan/switch-preview/:planType</code>",id:"endpoint-2-get-planswitch-previewplantype",level:2},{value:"Relevant Response Structure",id:"relevant-response-structure-1",level:3},{value:"Key Fields",id:"key-fields-1",level:3},{value:"Cross-Reference Pattern",id:"cross-reference-pattern",level:2},{value:"Icon Map Shape (example)",id:"icon-map-shape-example",level:3},{value:"Rendering Affected Channels (example)",id:"rendering-affected-channels-example",level:3},{value:"Field Comparison Summary",id:"field-comparison-summary",level:2},{value:"Notes",id:"notes",level:2}];function h(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"channel-icon-cross-reference-api-documentation",children:"Channel Icon Cross-Reference: API Documentation"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["Two endpoints expose channel data in different shapes. To render icons on the plan switch preview UI, the frontend uses ",(0,s.jsx)(n.code,{children:"channelSlug"})," from the preview response as a direct key into the icon map \u2014 the same slug keys used by the ",(0,s.jsx)(n.code,{children:"GET /channels/available/all"})," response."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"endpoint-1-get-channelsavailableall",children:["Endpoint 1: ",(0,s.jsx)(n.code,{children:"GET /channels/available/all"})]}),"\n",(0,s.jsx)(n.p,{children:"Returns the full channel catalog with access metadata per channel."}),"\n",(0,s.jsx)(n.h3,{id:"relevant-response-structure",children:"Relevant Response Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "userPlan": "BUSINESS",\n  "categories": {\n    "communication": {\n      "channels": [\n        {\n          "id": 1,\n          "name": "gmail",\n          "displayName": "Gmail",\n          "channelType": "EMAIL",\n          "category": "COMMUNICATION",\n          "access": {\n            "allowed": true,\n            "blockedBy": null,\n            "requiredPlans": null,\n            "requiredAddon": null,\n            "reason": null\n          }\n        },\n        {\n          "id": 2,\n          "name": "instagram_direct",\n          "displayName": "Instagram Direct",\n          "channelType": "FACEBOOK_MESSENGER",\n          "category": "COMMUNICATION",\n          "access": {\n            "allowed": false,\n            "blockedBy": "plan",\n            "requiredPlans": ["PREMIUM", "ORGANISATION"],\n            "requiredAddon": null,\n            "reason": "Requires PREMIUM or ORGANISATION plan"\n          }\n        }\n      ],\n      "limits": {\n        "current": 2,\n        "max": 5,\n        "unlimited": false,\n        "remaining": 3\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"key-fields",children:"Key Fields"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsxs)(n.td,{children:["Unique slug \u2014 use as icon map key (",(0,s.jsx)(n.code,{children:'"gmail"'}),", ",(0,s.jsx)(n.code,{children:'"instagram_direct"'}),", ",(0,s.jsx)(n.code,{children:'"whatsapp"'}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"displayName"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Human-readable name for display"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"channelType"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsxs)(n.td,{children:["Enum value \u2014 ",(0,s.jsx)(n.strong,{children:"not unique per channel"}),", multiple channels share the same type (see note below)"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"access.allowed"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"Whether the user can access this channel"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"access.blockedBy"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'"plan" | "addon" | "both" | null'})}),(0,s.jsx)(n.td,{children:"What is blocking access"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"access.requiredPlans"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string[] | null"})}),(0,s.jsx)(n.td,{children:"Plans that would unlock this channel"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"access.requiredAddon"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string | null"})}),(0,s.jsx)(n.td,{children:"Addon required to unlock this channel"})]})]})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["Why not use ",(0,s.jsx)(n.code,{children:"channelType"})," as an icon key:"]})," Multiple channels share the same enum value. ",(0,s.jsx)(n.code,{children:"gmail"}),", ",(0,s.jsx)(n.code,{children:"outlook"}),", and ",(0,s.jsx)(n.code,{children:"custom_email"})," all have ",(0,s.jsx)(n.code,{children:'channelType: "EMAIL"'}),". ",(0,s.jsx)(n.code,{children:"facebook_messenger"})," and ",(0,s.jsx)(n.code,{children:"instagram_direct"})," share ",(0,s.jsx)(n.code,{children:"FACEBOOK_MESSENGER"}),". ",(0,s.jsx)(n.code,{children:"twilio_sms"})," and ",(0,s.jsx)(n.code,{children:"twilio_voice"})," share ",(0,s.jsx)(n.code,{children:"SMS"}),". The ",(0,s.jsx)(n.code,{children:"name"})," slug is always unique."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"endpoint-2-get-planswitch-previewplantype",children:["Endpoint 2: ",(0,s.jsx)(n.code,{children:"GET /plan/switch-preview/:planType"})]}),"\n",(0,s.jsx)(n.p,{children:"Returns what would happen to the user's connected channels when switching plans."}),"\n",(0,s.jsx)(n.h3,{id:"relevant-response-structure-1",children:"Relevant Response Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "currentPlan": "PREMIUM",\n  "targetPlan": "BUSINESS",\n  "isUpgrade": false,\n  "affectedChannels": {\n    "planBlocked": [\n      {\n        "channelId": 12,\n        "channelSlug": "hubspot",\n        "channelName": "My HubSpot",\n        "channelType": "ECOMMERCE",\n        "displayName": "HubSpot",\n        "isConnected": true,\n        "reason": "Requires PREMIUM or ORGANISATION plan"\n      }\n    ],\n    "addonBlocked": [\n      {\n        "channelId": 7,\n        "channelSlug": "google_calendar",\n        "channelName": "Work Calendar",\n        "channelType": "CALENDAR",\n        "displayName": "Google Calendar",\n        "isConnected": true,\n        "requiredAddon": "CRM_CALENDAR_SYNC",\n        "requiresAddonPurchase": true,\n        "reason": "Requires CRM CALENDAR SYNC addon purchase to maintain access"\n      }\n    ],\n    "quantityExceeded": {\n      "current": 4,\n      "newMax": 2,\n      "excess": 2,\n      "channels": [\n        {\n          "channelId": 3,\n          "channelSlug": "whatsapp",\n          "channelName": "Support WhatsApp",\n          "isConnected": true\n        },\n        {\n          "channelId": 4,\n          "channelSlug": "whatsapp",\n          "channelName": "Sales WhatsApp",\n          "isConnected": false\n        }\n      ]\n    },\n    "totalAffected": 5\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"key-fields-1",children:"Key Fields"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"channelSlug"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsxs)(n.td,{children:["Matches ",(0,s.jsx)(n.code,{children:"name"})," from ",(0,s.jsx)(n.code,{children:"/channels/available/all"})," \u2014 use directly as icon map key"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"channelName"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsxs)(n.td,{children:["User-defined name for this connected instance (may differ from ",(0,s.jsx)(n.code,{children:"displayName"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"channelType"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Enum value \u2014 present but not recommended as icon key"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"displayName"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Human-readable name from the channel catalog"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"isConnected"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"Whether the channel is actively connected (vs. just selected)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"requiredAddon"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsxs)(n.td,{children:["Addon enum value the user needs to purchase (",(0,s.jsx)(n.code,{children:"addonBlocked"})," only)"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"requiresAddonPurchase"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsxs)(n.td,{children:["Whether the addon can be purchased on the target plan (",(0,s.jsx)(n.code,{children:"addonBlocked"})," only)"]})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"cross-reference-pattern",children:"Cross-Reference Pattern"}),"\n",(0,s.jsxs)(n.p,{children:["Since ",(0,s.jsx)(n.code,{children:"channelSlug"})," in the preview response directly matches ",(0,s.jsx)(n.code,{children:"name"})," in the ",(0,s.jsx)(n.code,{children:"available/all"})," response, icon resolution requires no lookup:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"iconMap[affectedChannel.channelSlug];\n"})}),"\n",(0,s.jsx)(n.h3,{id:"icon-map-shape-example",children:"Icon Map Shape (example)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const channelIconMap = {\n  whatsapp: WhatsAppIcon,\n  gmail: GmailIcon,\n  outlook: OutlookIcon,\n  custom_email: EmailIcon,\n  facebook_messenger: FacebookIcon,\n  instagram_direct: InstagramIcon,\n  telegram: TelegramIcon,\n  webchat: WebchatIcon,\n  twilio_sms: SmsIcon,\n  twilio_voice: VoiceIcon,\n  google_calendar: GoogleCalendarIcon,\n  microsoft_calendar: MicrosoftCalendarIcon,\n  calendly: CalendlyIcon,\n  zoom: ZoomIcon,\n  shopify: ShopifyIcon,\n  paypal: PaypalIcon,\n  stripe: StripeIcon,\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"rendering-affected-channels-example",children:"Rendering Affected Channels (example)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'// planBlocked, addonBlocked, and quantityExceeded.channels\n// all carry channelSlug \u2014 same pattern for each\n\nconst icon = channelIconMap[affectedChannel.channelSlug];\n\n// channelName is the user-defined label (e.g. "My Work Calendar")\n// displayName is the catalog name (e.g. "Google Calendar")\n// Use displayName alongside the icon, channelName as the subtitle\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"field-comparison-summary",children:"Field Comparison Summary"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Concern"}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.code,{children:"GET /channels/available/all"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.code,{children:"GET /plan/switch-preview/:planType"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Icon key"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"channel.name"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"affectedChannel.channelSlug"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Display label"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"channel.displayName"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"affectedChannel.displayName"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"User label"}),(0,s.jsx)(n.td,{children:"N/A"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"affectedChannel.channelName"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Channel type enum"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"channel.channelType"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"affectedChannel.channelType"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Access blocked by"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"channel.access.blockedBy"})}),(0,s.jsxs)(n.td,{children:["Implicit from array position (",(0,s.jsx)(n.code,{children:"planBlocked"}),", ",(0,s.jsx)(n.code,{children:"addonBlocked"}),", ",(0,s.jsx)(n.code,{children:"quantityExceeded"}),")"]})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"quantityExceeded.channels"})," only ever contains WhatsApp channels since it is the only channel type with a quantity limit. All entries will have ",(0,s.jsx)(n.code,{children:'channelSlug: "whatsapp"'}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"channelName"})," is the user-defined label and should be shown as a subtitle. Use ",(0,s.jsx)(n.code,{children:"displayName"})," as the primary label next to the icon."]}),"\n",(0,s.jsxs)(n.li,{children:["A channel in ",(0,s.jsx)(n.code,{children:"addonBlocked"})," with ",(0,s.jsx)(n.code,{children:"requiresAddonPurchase: true"})," means the user can buy the addon on the target plan to retain access \u2014 the UI should surface an upgrade path rather than treating it as a hard block."]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,c)=>{c.d(n,{R:()=>a,x:()=>r});var l=c(6540);const s={},d=l.createContext(s);function a(e){const n=l.useContext(d);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),l.createElement(d.Provider,{value:n},e.children)}}}]);