"use strict";(globalThis.webpackChunkbackend_docs=globalThis.webpackChunkbackend_docs||[]).push([[8465],{1653:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"twilio-integration","title":"Frontend Twilio SMS Integration Flow","description":"1. Search Available Numbers","source":"@site/docs/twilio-integration.md","sourceDirName":".","slug":"/twilio-integration","permalink":"/backend-docs/docs/twilio-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/twilio-integration.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Translate your site","permalink":"/backend-docs/docs/tutorial-extras/translate-your-site"}}');var r=s(4848),t=s(8453);const o={sidebar_position:7},l="Frontend Twilio SMS Integration Flow",a={},c=[{value:"1. <strong>Search Available Numbers</strong>",id:"1-search-available-numbers",level:2},{value:"2. <strong>Purchase Number</strong>",id:"2-purchase-number",level:2},{value:"3. <strong>View Owned Numbers</strong>",id:"3-view-owned-numbers",level:2},{value:"4. <strong>Send SMS</strong>",id:"4-send-sms",level:2},{value:"5. <strong>Check Usage/Limits</strong>",id:"5-check-usagelimits",level:2},{value:"6. <strong>Release Number</strong>",id:"6-release-number",level:2},{value:"7. <strong>Receive Incoming SMS (Real-time)</strong>",id:"7-receive-incoming-sms-real-time",level:2},{value:"Key Implementation Notes",id:"key-implementation-notes",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"frontend-twilio-sms-integration-flow",children:"Frontend Twilio SMS Integration Flow"})}),"\n",(0,r.jsxs)(n.h2,{id:"1-search-available-numbers",children:["1. ",(0,r.jsx)(n.strong,{children:"Search Available Numbers"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'GET /api/twilio/sms/available-numbers\nQuery params:\n  - countryCode: "US" | "GB" etc.\n  - areaCode?: string\n  - numberType: "local" | "mobile" | "tollFree" | "all"\n  - limit: number (max 50)\n\nResponse: List of available numbers with pricing\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"2-purchase-number",children:["2. ",(0,r.jsx)(n.strong,{children:"Purchase Number"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'POST /api/twilio/sms/purchase-number\nBody: {\n  phoneNumber: "+1234567890",\n  countryCode?: "US",\n  capabilities?: { sms: true, voice: true }\n}\n\nResponse: {\n  success: true,\n  number: VoiceNumber object,\n  billing: { monthlyPrice, nextBilling }\n}\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"3-view-owned-numbers",children:["3. ",(0,r.jsx)(n.strong,{children:"View Owned Numbers"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"GET /api/twilio/sms/my-numbers\n\nResponse: {\n  numbers: VoiceNumber[],\n  usage: { sent, limit, remaining }\n}\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"4-send-sms",children:["4. ",(0,r.jsx)(n.strong,{children:"Send SMS"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'POST /api/twilio/sms/send\nBody: {\n  to: "+1234567890",\n  message: "Hello",\n  from?: "+0987654321", // Optional, uses first number if omitted\n  mediaUrls?: string[] // For MMS\n}\n\nResponse: {\n  success: true,\n  messageId: "SM...",\n  status: "queued"\n}\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"5-check-usagelimits",children:["5. ",(0,r.jsx)(n.strong,{children:"Check Usage/Limits"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"GET /api/twilio/sms/usage/current\nResponse: { sent, limit, remaining, period }\n\nGET /api/twilio/sms/usage/check-limit\nResponse: { canSend: boolean, reason?: string }\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"6-release-number",children:["6. ",(0,r.jsx)(n.strong,{children:"Release Number"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"DELETE /api/twilio/sms/release/:numberId\n\nResponse: { success: true }\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"7-receive-incoming-sms-real-time",children:["7. ",(0,r.jsx)(n.strong,{children:"Receive Incoming SMS (Real-time)"})]}),"\n",(0,r.jsx)(n.p,{children:"Backend emits event \u2192 Frontend listens via WebSocket/SSE:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Event: 'sms.message.received'\n{\n  channelId, senderId, content, attachments,\n  metadata: { channelMessageId: \"SM...\" }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"key-implementation-notes",children:"Key Implementation Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authentication"}),": All endpoints require ",(0,r.jsx)(n.code,{children:"SessionAuthGuard"})," (JWT)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Prerequisites"}),": User needs ",(0,r.jsx)(n.code,{children:"TWILIO_MESSAGE_PACK"})," addon active"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Plan Limits"}),": Business (1+4), Premium (2+8), Organisation (unlimited)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Webhooks"}),": Backend auto-configures Twilio webhooks on purchase"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Billing"}),": Prorated charges apply (\xa320/month per number)"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(6540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);