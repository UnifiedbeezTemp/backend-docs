"use strict";(globalThis.webpackChunkbackend_docs=globalThis.webpackChunkbackend_docs||[]).push([[145],{5731:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"channels-integration/custom-email-integration","title":"Custom Email (AWS SES) Integration Guide","description":"Overview","source":"@site/docs/channels-integration/custom-email-integration.md","sourceDirName":"channels-integration","slug":"/channels-integration/custom-email-integration","permalink":"/backend-docs/docs/channels-integration/custom-email-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/channels-integration/custom-email-integration.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Email OAuth Integration Guide for React Native","permalink":"/backend-docs/docs/channels-integration/email-channels-integration-mobile"},"next":{"title":"Email channels integration guide for web","permalink":"/backend-docs/docs/channels-integration/email-channels-integration-web"}}');var r=i(4848),o=i(8453);const l={sidebar_position:2},c="Custom Email (AWS SES) Integration Guide",t={},a=[{value:"Overview",id:"overview",level:2},{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Backend Requirements",id:"backend-requirements",level:3},{value:"User Requirements",id:"user-requirements",level:3},{value:"Integration Flow",id:"integration-flow",level:2},{value:"Complete Setup Flow",id:"complete-setup-flow",level:3},{value:"Phase 1: Setup Receiving",id:"phase-1-setup-receiving",level:2},{value:"Initiate Custom Email Setup",id:"initiate-custom-email-setup",level:3},{value:"What Happens Backend",id:"what-happens-backend",level:3},{value:"Phase 2: Verify Setup",id:"phase-2-verify-setup",level:2},{value:"Verify DNS Configuration",id:"verify-dns-configuration",level:3},{value:"What Happens Backend",id:"what-happens-backend-1",level:3},{value:"Setup Email Receiving Webhook",id:"setup-email-receiving-webhook",level:2},{value:"What Happens Backend",id:"what-happens-backend-2",level:3},{value:"Response Formats",id:"response-formats",level:2},{value:"Setup Response Structure",id:"setup-response-structure",level:3},{value:"Verification Response Structure",id:"verification-response-structure",level:3},{value:"DNS Configuration Guide",id:"dns-configuration-guide",level:2},{value:"Step-by-Step DNS Setup",id:"step-by-step-dns-setup",level:3},{value:"1. MX Record (Mail Exchange)",id:"1-mx-record-mail-exchange",level:4},{value:"2. TXT Record (Domain Verification)",id:"2-txt-record-domain-verification",level:4},{value:"Error Handling",id:"error-handling",level:2},{value:"Common Error Scenarios",id:"common-error-scenarios",level:3},{value:"Domain Already Registered",id:"domain-already-registered",level:4},{value:"DNS Records Not Propagated",id:"dns-records-not-propagated",level:4},{value:"Invalid Domain Format",id:"invalid-domain-format",level:4},{value:"Channel Not Found",id:"channel-not-found",level:4},{value:"AWS SES Quota Exceeded",id:"aws-ses-quota-exceeded",level:4},{value:"Verification Checklist",id:"verification-checklist",level:2},{value:"DNS Verification Tools",id:"dns-verification-tools",level:3},{value:"Complete Flow Example",id:"complete-flow-example",level:2},{value:"Step 1: Setup",id:"step-1-setup",level:3},{value:"Step 2: Configure DNS",id:"step-2-configure-dns",level:3},{value:"Step 3: Verify",id:"step-3-verify",level:3},{value:"Step 4: Activate Receiving",id:"step-4-activate-receiving",level:3},{value:"Important Notes",id:"important-notes",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"DNS Not Verifying",id:"dns-not-verifying",level:3},{value:"Emails Not Being Received",id:"emails-not-being-received",level:3},{value:"Need to Re-verify",id:"need-to-re-verify",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"custom-email-aws-ses-integration-guide",children:"Custom Email (AWS SES) Integration Guide"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This guide covers setting up custom domain email receiving using AWS SES (Simple Email Service). The setup is a two-phase process requiring DNS configuration."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#prerequisites",children:"Prerequisites"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#integration-flow",children:"Integration Flow"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#phase-1-setup-receiving",children:"Phase 1: Setup Receiving"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#phase-2-verify-setup",children:"Phase 2: Verify Setup"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setup-email-receiving-webhook",children:"Setup Email Receiving Webhook"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#response-formats",children:"Response Formats"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#dns-configuration-guide",children:"DNS Configuration Guide"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#error-handling",children:"Error Handling"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.h3,{id:"backend-requirements",children:"Backend Requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"AWS SES configured in production mode"}),"\n",(0,r.jsx)(n.li,{children:"S3 bucket for email storage"}),"\n",(0,r.jsx)(n.li,{children:"SNS topics for email notifications"}),"\n",(0,r.jsx)(n.li,{children:"Domain ownership verification capability"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"user-requirements",children:"User Requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Valid domain name"}),"\n",(0,r.jsx)(n.li,{children:"Access to domain DNS settings"}),"\n",(0,r.jsx)(n.li,{children:"Ability to add DNS records (MX, TXT)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"integration-flow",children:"Integration Flow"}),"\n",(0,r.jsx)(n.h3,{id:"complete-setup-flow",children:"Complete Setup Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"1. User provides domain name\n   \u2193\n2. Backend generates DNS records (MX, TXT verification)\n   \u2193\n3. User receives DNS records to configure\n   \u2193\n4. User adds DNS records to their domain provider\n   \u2193\n5. DNS propagation (can take 24-48 hours)\n   \u2193\n6. User triggers verification\n   \u2193\n7. Backend verifies DNS records with AWS SES\n   \u2193\n8. Backend activates email receiving\n   \u2193\n9. User can now receive emails at domain\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"phase-1-setup-receiving",children:"Phase 1: Setup Receiving"}),"\n",(0,r.jsx)(n.h3,{id:"initiate-custom-email-setup",children:"Initiate Custom Email Setup"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Route:"})," ",(0,r.jsx)(n.code,{children:"POST /channels/email/custom/setup-receiving"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Headers:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Authorization: Bearer {accessToken}\nContent-Type: application/json\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "domain": "yourdomain.com"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "message": "Custom email setup initiated",\n  "connectedChannelId": 123,\n  "domain": "yourdomain.com",\n  "status": "pending_verification",\n  "dnsRecords": {\n    "mx": [\n      {\n        "type": "MX",\n        "name": "@",\n        "value": "inbound-smtp.us-east-1.amazonaws.com",\n        "priority": 10,\n        "ttl": 3600\n      }\n    ],\n    "txt": [\n      {\n        "type": "TXT",\n        "name": "_amazonses.yourdomain.com",\n        "value": "verification_token_here",\n        "ttl": 3600\n      }\n    ]\n  },\n  "instructions": "Add the DNS records to your domain provider and verify within 72 hours"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"what-happens-backend",children:"What Happens Backend"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Creates ",(0,r.jsx)(n.code,{children:"ConnectedChannel"}),' with status "pending_verification"']}),"\n",(0,r.jsx)(n.li,{children:"Registers domain with AWS SES"}),"\n",(0,r.jsx)(n.li,{children:"Generates verification token"}),"\n",(0,r.jsx)(n.li,{children:"Returns DNS records for user configuration"}),"\n",(0,r.jsx)(n.li,{children:"Domain stored but not yet verified"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"phase-2-verify-setup",children:"Phase 2: Verify Setup"}),"\n",(0,r.jsx)(n.h3,{id:"verify-dns-configuration",children:"Verify DNS Configuration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Route:"})," ",(0,r.jsx)(n.code,{children:"POST /channels/email/custom/:channelId/verify-receiving"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Headers:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Authorization: Bearer {accessToken}\nContent-Type: application/json\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channelId"}),": The connectedChannelId from Phase 1"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Success Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "message": "Custom email receiving activated",\n  "connectedChannelId": 123,\n  "domain": "yourdomain.com",\n  "status": "verified",\n  "emailAccounts": [\n    {\n      "id": 456,\n      "email": "support@yourdomain.com",\n      "canReceive": true,\n      "canSend": false\n    }\n  ],\n  "verifiedAt": "2025-12-17T12:00:00.000Z"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Failed Verification Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "statusCode": 400,\n  "message": "DNS records not yet propagated or incorrectly configured",\n  "error": "Bad Request",\n  "details": {\n    "domain": "yourdomain.com",\n    "missingRecords": ["MX", "TXT"],\n    "suggestion": "Please wait for DNS propagation (24-48 hours) or check your DNS configuration"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"what-happens-backend-1",children:"What Happens Backend"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Checks AWS SES domain verification status"}),"\n",(0,r.jsx)(n.li,{children:"Verifies MX records point to AWS SES"}),"\n",(0,r.jsx)(n.li,{children:"Verifies TXT record for domain ownership"}),"\n",(0,r.jsxs)(n.li,{children:["If verified:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Updates channel status to "verified"'}),"\n",(0,r.jsx)(n.li,{children:"Creates EmailAccount for domain"}),"\n",(0,r.jsx)(n.li,{children:"Activates SES receipt rules"}),"\n",(0,r.jsx)(n.li,{children:"Configures S3 storage for incoming emails"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["If not verified:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Returns error with missing records"}),"\n",(0,r.jsx)(n.li,{children:'Keeps channel in "pending_verification" state'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"setup-email-receiving-webhook",children:"Setup Email Receiving Webhook"}),"\n",(0,r.jsx)(n.p,{children:"After verification, set up the receiving mechanism (webhook subscription or polling)."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Route:"})," ",(0,r.jsx)(n.code,{children:"POST /channels/email/setup-receiving/:channelId"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Headers:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Authorization: Bearer {accessToken}\nContent-Type: application/json\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Path Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channelId"}),": The connectedChannelId"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "message": "Email receiving setup successful",\n  "provider": "custom"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"what-happens-backend-2",children:"What Happens Backend"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Creates SNS subscription for email notifications"}),"\n",(0,r.jsx)(n.li,{children:"Configures webhook endpoint for incoming emails"}),"\n",(0,r.jsx)(n.li,{children:"Sets up SES receipt rule set"}),"\n",(0,r.jsx)(n.li,{children:"Links S3 bucket to channel for email storage"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"response-formats",children:"Response Formats"}),"\n",(0,r.jsx)(n.h3,{id:"setup-response-structure",children:"Setup Response Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"{\n  success: boolean;\n  message: string;\n  connectedChannelId: number;\n  domain: string;\n  status: 'pending_verification' | 'verified' | 'failed';\n  dnsRecords?: {\n    mx: Array<{\n      type: string;\n      name: string;\n      value: string;\n      priority?: number;\n      ttl: number;\n    }>;\n    txt: Array<{\n      type: string;\n      name: string;\n      value: string;\n      ttl: number;\n    }>;\n  };\n  instructions?: string;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"verification-response-structure",children:"Verification Response Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"{\n  success: boolean;\n  message: string;\n  connectedChannelId: number;\n  domain: string;\n  status: 'verified' | 'pending_verification';\n  emailAccounts?: Array<{\n    id: number;\n    email: string;\n    canReceive: boolean;\n    canSend: boolean;\n  }>;\n  verifiedAt?: string; // ISO 8601 format\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"dns-configuration-guide",children:"DNS Configuration Guide"}),"\n",(0,r.jsx)(n.h3,{id:"step-by-step-dns-setup",children:"Step-by-Step DNS Setup"}),"\n",(0,r.jsx)(n.h4,{id:"1-mx-record-mail-exchange",children:"1. MX Record (Mail Exchange)"}),"\n",(0,r.jsx)(n.p,{children:"Directs incoming emails to AWS SES."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Configuration:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Type:     MX\nName:     @ (or leave blank for root domain)\nValue:    inbound-smtp.us-east-1.amazonaws.com\nPriority: 10\nTTL:      3600 (1 hour)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common DNS Providers:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"GoDaddy:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Go to DNS Management"}),"\n",(0,r.jsx)(n.li,{children:"Add Record \u2192 MX"}),"\n",(0,r.jsx)(n.li,{children:"Priority: 10"}),"\n",(0,r.jsx)(n.li,{children:"Points to: inbound-smtp.us-east-1.amazonaws.com"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cloudflare:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DNS \u2192 Add Record"}),"\n",(0,r.jsx)(n.li,{children:"Type: MX"}),"\n",(0,r.jsx)(n.li,{children:"Name: @"}),"\n",(0,r.jsx)(n.li,{children:"Mail server: inbound-smtp.us-east-1.amazonaws.com"}),"\n",(0,r.jsx)(n.li,{children:"Priority: 10"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Namecheap:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Advanced DNS \u2192 Add New Record"}),"\n",(0,r.jsx)(n.li,{children:"Type: MX Record"}),"\n",(0,r.jsx)(n.li,{children:"Host: @"}),"\n",(0,r.jsx)(n.li,{children:"Value: inbound-smtp.us-east-1.amazonaws.com"}),"\n",(0,r.jsx)(n.li,{children:"Priority: 10"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"2-txt-record-domain-verification",children:"2. TXT Record (Domain Verification)"}),"\n",(0,r.jsx)(n.p,{children:"Proves domain ownership to AWS SES."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Configuration:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Type:  TXT\nName:  _amazonses.yourdomain.com\nValue: verification_token_from_aws\nTTL:   3600 (1 hour)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common DNS Providers:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"GoDaddy:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DNS Management"}),"\n",(0,r.jsx)(n.li,{children:"Add Record \u2192 TXT"}),"\n",(0,r.jsx)(n.li,{children:"Name: _amazonses"}),"\n",(0,r.jsx)(n.li,{children:"Value: paste verification token"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cloudflare:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DNS \u2192 Add Record"}),"\n",(0,r.jsx)(n.li,{children:"Type: TXT"}),"\n",(0,r.jsx)(n.li,{children:"Name: _amazonses"}),"\n",(0,r.jsx)(n.li,{children:"Content: paste verification token"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Namecheap:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Advanced DNS \u2192 Add New Record"}),"\n",(0,r.jsx)(n.li,{children:"Type: TXT Record"}),"\n",(0,r.jsx)(n.li,{children:"Host: _amazonses"}),"\n",(0,r.jsx)(n.li,{children:"Value: paste verification token"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.h3,{id:"common-error-scenarios",children:"Common Error Scenarios"}),"\n",(0,r.jsx)(n.h4,{id:"domain-already-registered",children:"Domain Already Registered"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Status Code:"})," 400"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "statusCode": 400,\n  "message": "Domain already registered",\n  "error": "Bad Request"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Action:"})," Check if domain is already connected or use different domain"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"dns-records-not-propagated",children:"DNS Records Not Propagated"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Status Code:"})," 400"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "statusCode": 400,\n  "message": "DNS records not yet propagated or incorrectly configured",\n  "error": "Bad Request",\n  "details": {\n    "domain": "yourdomain.com",\n    "missingRecords": ["MX", "TXT"]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Actions:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Wait 24-48 hours for DNS propagation"}),"\n",(0,r.jsx)(n.li,{children:"Verify DNS records are correctly configured"}),"\n",(0,r.jsx)(n.li,{children:"Use DNS checker tools (whatsmydns.net, dnschecker.org)"}),"\n",(0,r.jsx)(n.li,{children:"Retry verification after propagation"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"invalid-domain-format",children:"Invalid Domain Format"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Status Code:"})," 400"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "statusCode": 400,\n  "message": "Invalid domain format",\n  "error": "Bad Request"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Action:"})," Ensure domain is in correct format (e.g., ",(0,r.jsx)(n.code,{children:"example.com"}),", not ",(0,r.jsx)(n.code,{children:"https://example.com"}),")"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"channel-not-found",children:"Channel Not Found"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Status Code:"})," 404"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "statusCode": 404,\n  "message": "Channel not found",\n  "error": "Not Found"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Action:"})," Verify channelId is correct and belongs to authenticated user"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"aws-ses-quota-exceeded",children:"AWS SES Quota Exceeded"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Status Code:"})," 500"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "statusCode": 500,\n  "message": "SES domain limit reached",\n  "error": "Internal Server Error"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Action:"})," Contact support to increase AWS SES domain limit"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"verification-checklist",children:"Verification Checklist"}),"\n",(0,r.jsx)(n.p,{children:"Before triggering verification, ensure:"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","MX record added with correct value and priority"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","TXT record added with correct verification token"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","DNS changes saved at domain provider"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Waited at least 1 hour for DNS propagation (24-48 hours recommended)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verified DNS propagation using online tools"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No conflicting MX records exist"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dns-verification-tools",children:"DNS Verification Tools"}),"\n",(0,r.jsx)(n.p,{children:"Check DNS propagation:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.whatsmydns.net",children:"https://www.whatsmydns.net"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://dnschecker.org",children:"https://dnschecker.org"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://mxtoolbox.com",children:"https://mxtoolbox.com"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"complete-flow-example",children:"Complete Flow Example"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-setup",children:"Step 1: Setup"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'POST /channels/email/custom/setup-receiving\n{\n  "domain": "mycompany.com"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "connectedChannelId": 123,\n  "domain": "mycompany.com",\n  "status": "pending_verification",\n  "dnsRecords": {\n    "mx": [\n      {\n        "type": "MX",\n        "value": "inbound-smtp.us-east-1.amazonaws.com",\n        "priority": 10\n      }\n    ],\n    "txt": [\n      {\n        "type": "TXT",\n        "name": "_amazonses.mycompany.com",\n        "value": "abc123xyz789"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-configure-dns",children:"Step 2: Configure DNS"}),"\n",(0,r.jsx)(n.p,{children:"Add records to DNS provider (wait 24-48 hours for propagation)"}),"\n",(0,r.jsx)(n.h3,{id:"step-3-verify",children:"Step 3: Verify"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"POST /channels/email/custom/123/verify-receiving\n{}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response (Success):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "status": "verified",\n  "emailAccounts": [\n    {\n      "id": 456,\n      "email": "support@mycompany.com",\n      "canReceive": true\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-activate-receiving",children:"Step 4: Activate Receiving"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"POST /channels/email/setup-receiving/123\n{}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "message": "Email receiving setup successful",\n  "provider": "custom"\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DNS Propagation Time:"})," Can take 24-48 hours, but often faster (1-4 hours)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Verification Expiry:"})," AWS SES verification tokens expire after 72 hours"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MX Priority:"})," Use priority 10 unless you have existing mail servers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multiple Domains:"})," Each domain requires separate setup"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Email Addresses:"})," After verification, any email sent to ",(0,r.jsx)(n.code,{children:"*@yourdomain.com"})," will be received"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Storage:"})," Incoming emails are stored in S3 and processed via webhooks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sending:"})," Custom email receiving does NOT include sending capabilities (requires separate SMTP setup)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"dns-not-verifying",children:"DNS Not Verifying"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Check:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Correct MX record value: ",(0,r.jsx)(n.code,{children:"inbound-smtp.{region}.amazonaws.com"})]}),"\n",(0,r.jsxs)(n.li,{children:["Correct TXT record name: ",(0,r.jsx)(n.code,{children:"_amazonses.yourdomain.com"})]}),"\n",(0,r.jsx)(n.li,{children:"No typos in verification token"}),"\n",(0,r.jsx)(n.li,{children:"Records are saved and published"}),"\n",(0,r.jsx)(n.li,{children:"Wait longer for propagation"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"emails-not-being-received",children:"Emails Not Being Received"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Check:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:'Domain verification status is "verified"'}),"\n",(0,r.jsx)(n.li,{children:"Receipt rules are active"}),"\n",(0,r.jsx)(n.li,{children:"S3 bucket permissions are correct"}),"\n",(0,r.jsx)(n.li,{children:"SNS subscription is confirmed"}),"\n",(0,r.jsx)(n.li,{children:"Check spam/junk folders"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"need-to-re-verify",children:"Need to Re-verify"}),"\n",(0,r.jsx)(n.p,{children:"If verification expires:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Call setup endpoint again with same domain"}),"\n",(0,r.jsx)(n.li,{children:"New verification token will be generated"}),"\n",(0,r.jsx)(n.li,{children:"Update TXT record with new token"}),"\n",(0,r.jsx)(n.li,{children:"Trigger verification again"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var s=i(6540);const r={},o=s.createContext(r);function l(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);